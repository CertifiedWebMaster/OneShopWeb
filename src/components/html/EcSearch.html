<div class="ec-search">
  <slot name="input">
    <input type="search" class="form-control">
  </slot>

  <template v-if="elInput">
    <b-popover
      triggers="focus"
      :custom-class="'ec-search__popover'"
      :target="elInput.id"
      :show.sync="showPopover"
      :placement="popoverPlacement"
    >
      <div
        v-if="searching"
        class="spinner-border spinner-border-sm my-2"
        role="status"
      >
        <span class="sr-only">Loading...</span>
      </div>

      <slide-y-up-transition :duration="{ enter: 300, leave: 50 }">
        <div v-if="!searching && searchTerm" class="ec-search__info">
          <template v-if="suggestedTerm">
            {{ dictionary('did_you_mean') }}
            <a
              class="ec-search__suggestion"
              href="#"
              @click.prevent="setSearchTerm(suggestedTerm)"
              v-text="suggestedTerm"
            />
            ?
          </template>
          <span v-if="!totalSearchResults" class="ec-search__no-results">
            {{ dictionary('no_results_for') }}
            <em>{{ searchTerm }}</em>
          </span>
        </div>
      </slide-y-up-transition>

      <slide-y-up-transition>
        <div v-if="history.length" class="ec-search__history">
          <i class="fas fa-history"></i>
          <a
            class="ec-search__history__link"
            v-for="term in history"
            href="#"
            @click.prevent="setSearchTerm(term)"
            v-text="term"
          />
        </div>
      </slide-y-up-transition>
    </b-popover>
  </template>
</div>
