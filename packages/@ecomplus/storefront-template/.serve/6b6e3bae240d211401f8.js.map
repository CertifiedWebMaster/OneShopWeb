{"version":3,"sources":["webpack:////home/leo/code/storefront-template/node_modules/@ecomplus/passport-client/node_modules/eventemitter3/index.js","webpack:////home/leo/code/storefront-template/node_modules/@ecomplus/passport-client/src/constructor.js","webpack:////home/leo/code/storefront-template/node_modules/@ecomplus/passport-client/src/index.js","webpack:////home/leo/code/storefront-template/node_modules/@ecomplus/passport-client/src/lib/create-iframe.js","webpack:////home/leo/code/storefront-template/node_modules/@ecomplus/passport-client/src/lib/create-popup.js","webpack:////home/leo/code/storefront-template/node_modules/@ecomplus/passport-client/src/lib/get-cookie.js","webpack:////home/leo/code/storefront-template/node_modules/@ecomplus/passport-client/src/lib/set-cookie.js","webpack:////home/leo/code/storefront-template/node_modules/@ecomplus/passport-client/src/methods/check-authorization.js","webpack:////home/leo/code/storefront-template/node_modules/@ecomplus/passport-client/src/methods/check-login.js","webpack:////home/leo/code/storefront-template/node_modules/@ecomplus/passport-client/src/methods/check-verification.js","webpack:////home/leo/code/storefront-template/node_modules/@ecomplus/passport-client/src/methods/fetch-login.js","webpack:////home/leo/code/storefront-template/node_modules/@ecomplus/passport-client/src/methods/fetch-oauth-profile.js","webpack:////home/leo/code/storefront-template/node_modules/@ecomplus/passport-client/src/methods/fetch-oauth-providers.js","webpack:////home/leo/code/storefront-template/node_modules/@ecomplus/passport-client/src/methods/fetch-order.js","webpack:////home/leo/code/storefront-template/node_modules/@ecomplus/passport-client/src/methods/fetch-orders-list.js","webpack:////home/leo/code/storefront-template/node_modules/@ecomplus/passport-client/src/methods/get-customer-name.js","webpack:////home/leo/code/storefront-template/node_modules/@ecomplus/passport-client/src/methods/get-customer.js","webpack:////home/leo/code/storefront-template/node_modules/@ecomplus/passport-client/src/methods/load-stored-session.js","webpack:////home/leo/code/storefront-template/node_modules/@ecomplus/passport-client/src/methods/logout.js","webpack:////home/leo/code/storefront-template/node_modules/@ecomplus/passport-client/src/methods/popup-login.js","webpack:////home/leo/code/storefront-template/node_modules/@ecomplus/passport-client/src/methods/popup-oauth-link.js","webpack:////home/leo/code/storefront-template/node_modules/@ecomplus/passport-client/src/methods/request-api.js","webpack:////home/leo/code/storefront-template/node_modules/@ecomplus/passport-client/src/methods/set-customer.js","webpack:////home/leo/code/storefront-template/node_modules/@ecomplus/passport-client/src/methods/set-session.js","webpack:////home/leo/code/storefront-template/node_modules/core-js/modules/es.string.ends-with.js"],"names":["EcomPassport","storeId","lang","storageKey","localStorage","window","document","ecomPassport","Constructor","$ecomConfig","get","customer","session","sessionId","possible","i","charAt","Math","floor","random","length","emitter","EventEmitter","forEach","method","ev","fn","methodsMiddleware","args","emitChange","result","emit","loadStoredSession","logout","canSave","setSession","setCustomer","getCustomerName","getCustomer","checkLogin","checkAuthorization","checkVerification","fetchLogin","email","docNumber","fetchOauthProfile","fetchOauthProviders","fetchOrdersList","from","size","fetchOrder","orderId","requestApi","url","data","popupOauthLink","popupLogin","enableSkip","baseUri","Error","iframe","createElement","setAttribute","body","appendChild","title","screen","width","open","cname","name","decodedCookie","decodeURIComponent","cookie","ca","split","c","substring","indexOf","cvalue","exdays","d","Date","setTime","getTime","expires","toUTCString","Boolean","auth","level","passport","doc_number","then","canAppendIframe","iframeUri","createIframe","req","store","requestPromises","resultOrders","sortOrdersFn","a","b","number","orders","sort","slice","_id","push","Promise","all","self","getNickname","sessionJson","getCookie","JSON","parse","e","setCookie","customerJson","getItem","removeItem","canSkipLogin","popupWatch","getCustomerInfo","fromCallback","clearInterval","passportCallback","popup","createPopup","focus","setInterval","closed","toLowerCase","reject","customerId","id","accessToken","token","access_token","response","endsWith","Array","isArray","Object","assign","setItem","stringify"],"mappings":";;;;;;;;;;AAAa;;AAEb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,SAAS;AACpB,WAAW,EAAE;AACb,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,aAAa;AACxB,WAAW,gBAAgB;AAC3B,WAAW,SAAS;AACpB,WAAW,EAAE;AACb,WAAW,QAAQ;AACnB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,aAAa;AACxB,WAAW,gBAAgB;AAC3B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,gBAAgB;AAC3B,aAAa,MAAM;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,yDAAyD,OAAO;AAChE;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,gBAAgB;AAC3B,aAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,gBAAgB;AAC3B,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,yCAAyC,SAAS;AAClD;AACA;;AAEA;AACA,GAAG;AACH;AACA;;AAEA,eAAe,YAAY;AAC3B;;AAEA;AACA,2DAA2D;AAC3D,+DAA+D;AAC/D,mEAAmE;AACnE,uEAAuE;AACvE;AACA,0DAA0D,SAAS;AACn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","file":"6b6e3bae240d211401f8.js","sourcesContent":["'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n","import { $ecomConfig } from '@ecomplus/utils'\nimport * as EventEmitter from 'eventemitter3'\n\nimport loadStoredSession from './methods/load-stored-session'\nimport setSession from './methods/set-session'\nimport setCustomer from './methods/set-customer'\nimport getCustomerName from './methods/get-customer-name'\nimport getCustomer from './methods/get-customer'\nimport fetchOauthProfile from './methods/fetch-oauth-profile'\nimport fetchOauthProviders from './methods/fetch-oauth-providers'\nimport fetchLogin from './methods/fetch-login'\nimport fetchOrdersList from './methods/fetch-orders-list'\nimport fetchOrder from './methods/fetch-order'\nimport checkLogin from './methods/check-login'\nimport checkAuthorization from './methods/check-authorization'\nimport checkVerification from './methods/check-verification'\nimport logout from './methods/logout'\nimport popupOauthLink from './methods/popup-oauth-link'\nimport popupLogin from './methods/popup-login'\nimport requestApi from './methods/request-api'\n\n/**\n * Construct a new customer account instance object.\n * @constructor\n * @param {number} [storeId=$ecomConfig.get('store_id')] - Preset Store ID number\n * @param {string} [lang=$ecomConfig.get('lang')] - Snake case language code\n * @param {string|null} [storageKey] - Item key to persist account data\n * @param {object} [localStorage=window.localStorage] -\n * [Local Storage interface]{@link https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage}\n * @param {object} [document=window.document] - Object reference to\n * [document]{@link https://developer.mozilla.org/en-US/docs/Web/API/Window/document}\n *\n * @example\n\n// Default instance\nconst ecomPassport = new EcomPassport()\n\n * @example\n\n// Optionally defining Store ID, lang and custom storage key\nconst storeId = 2000\nconst lang = 'en_us'\nconst storageKey = 'myPassportKey'\nconst customEcomPassport = new EcomPassport(storeId, lang, storageKey)\n\n */\n\nconst EcomPassport = function (\n  storeId,\n  lang,\n  storageKey = 'ecomPassportClient',\n  localStorage = typeof window === 'object' && window.localStorage,\n  document = typeof window === 'object' && window.document\n) {\n  const ecomPassport = this\n\n  /**\n   * Construct a new account instance object.\n   * @memberof EcomPassport\n   * @type {function}\n   * @see EcomPassport\n   */\n  ecomPassport.Constructor = EcomPassport\n\n  /**\n   * Respective Store ID number.\n   * @memberof EcomPassport\n   * @type {number}\n   */\n  ecomPassport.storeId = storeId || $ecomConfig.get('store_id')\n\n  /**\n   * Instance language code.\n   * @memberof EcomPassport\n   * @type {string}\n   */\n  ecomPassport.lang = lang || $ecomConfig.get('lang')\n\n  /**\n   * Item key to persist JSON {@link EcomPassport#customer}\n   * with [localStorage]{@link EcomPassport#localStorage}\n   * and cookie name to persist {@link EcomPassport#session}.\n   * @memberof EcomPassport\n   * @type {string|null}\n   */\n  ecomPassport.storageKey = storageKey\n\n  /**\n   * [Storage interface]{@link https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage}.\n   * @memberof EcomPassport\n   * @type {object}\n   */\n  ecomPassport.localStorage = localStorage\n\n  /**\n   * [Window document]{@link https://developer.mozilla.org/en-US/docs/Web/API/Window/document}.\n   * @memberof EcomPassport\n   * @type {object}\n   */\n  ecomPassport.document = document\n\n  /**\n   * Customer account data following\n   * {@link https://developers.e-com.plus/docs/api/#/store/customers E-Com Plus customer object model}.\n   * @memberof EcomPassport\n   * @type {object}\n   */\n  ecomPassport.customer = {}\n\n  /**\n   * Passport authentication session object.\n   * @memberof EcomPassport\n   * @type {object}\n   */\n  ecomPassport.session = {}\n\n  /**\n   * Passport random 32 chars session ID.\n   * @memberof EcomPassport\n   * @type {object}\n   */\n  ecomPassport.sessionId = ''\n  const possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789'\n  for (let i = 0; i < 32; i++) {\n    ecomPassport.sessionId += possible.charAt(Math.floor(Math.random() * possible.length))\n  }\n\n  const emitter = new EventEmitter()\n  ;['on', 'off', 'once'].forEach(method => {\n    ecomPassport[method] = (ev, fn) => {\n      emitter[method](ev, fn)\n    }\n  })\n\n  const methodsMiddleware = (method, args = [], emitChange) => {\n    const result = method(ecomPassport, emitter, args)\n    if (result && emitChange) {\n      const { customer } = ecomPassport\n\n      /**\n       * @event EcomPassport#change\n       * @type {object}\n       * @property {object} customer - Customer account data\n       * @example ecomCart.on('change', ({ customer }) => { console.log(customer._id) })\n       */\n      emitter.emit('change', { customer })\n    }\n    return result\n  }\n\n  this.loadStoredSession = () => methodsMiddleware(loadStoredSession, [], true)\n\n  this.logout = canSave => methodsMiddleware(logout, [canSave], true)\n\n  this.setSession = (session, canSave) => methodsMiddleware(setSession, [session, canSave], true)\n\n  this.setCustomer = (customer, canSave) => methodsMiddleware(setCustomer, [customer, canSave], true)\n\n  this.getCustomerName = () => methodsMiddleware(getCustomerName)\n\n  this.getCustomer = () => methodsMiddleware(getCustomer)\n\n  this.checkLogin = () => methodsMiddleware(checkLogin)\n\n  this.checkAuthorization = () => methodsMiddleware(checkAuthorization)\n\n  this.checkVerification = () => methodsMiddleware(checkVerification)\n\n  this.fetchLogin = (email, docNumber) => methodsMiddleware(fetchLogin, [email, docNumber])\n\n  this.fetchOauthProfile = () => methodsMiddleware(fetchOauthProfile)\n\n  this.fetchOauthProviders = () => methodsMiddleware(fetchOauthProviders)\n\n  this.fetchOrdersList = (from, size) => methodsMiddleware(fetchOrdersList, [from, size])\n\n  this.fetchOrder = orderId => methodsMiddleware(fetchOrder, [orderId])\n\n  this.requestApi = (url, method, data) => methodsMiddleware(requestApi, [url, method, data])\n\n  this.popupOauthLink = url => methodsMiddleware(popupOauthLink, [url])\n\n  this.popupLogin = (enableSkip, baseUri) => methodsMiddleware(popupLogin, [enableSkip, baseUri])\n\n  loadStoredSession(ecomPassport)\n}\n\nexport default EcomPassport\n","/*!\n * @ecomplus/passport-client\n * (c) E-Com Club <ti@e-com.club>\n * Released under the MIT License.\n */\n\n/**\n * Handle customer authentication with E-Com Plus Passport.\n * {@link https://github.com/ecomclub/ecomplus-passport-client GitHub}\n *\n * @module @ecomplus/passport-client\n * @author E-Com Club <ti@e-com.club>\n * @return {@link ecomPassport}\n * @see ecomPassport\n *\n * @example\n * // ES import default\n * import ecomPassport from '@ecomplus/passport-client'\n *\n * @example\n * // Optional named ES import for default instance and constructor\n * import { ecomPassport, EcomPassport } from '@ecomplus/passport-client'\n *\n * @example\n * // With CommonJS\n * const ecomPassport = require('@ecomplus/passport-client')\n *\n * @example\n * <!-- Global `ecomPassport` from CDN on browser -->\n * <script src=\"https://cdn.jsdelivr.net/npm/@ecomplus/passport-client/dist/ecom-passport.var.min.js\"></script>\n *\n * @example\n * <!-- Bundle from CDN with `ecomUtils`, `ecomClient` and `EventEmitter3` -->\n * <script src=\"https://cdn.jsdelivr.net/npm/@ecomplus/passport-client/dist/ecom-passport.bundle.min.js\"></script>\n */\n\nimport EcomPassport from './constructor'\n\n/**\n * Default `EcomPassport` instance.\n * @global\n * @type EcomPassport\n */\n\nconst ecomPassport = new EcomPassport()\n\nexport default ecomPassport\n\nexport { ecomPassport, EcomPassport }\n","export default url => {\n  if (typeof window !== 'object') {\n    throw new Error('Method available for browser only')\n  }\n\n  // create hidden iframe and append to body\n  const iframe = document.createElement('iframe')\n  iframe.setAttribute('src', url)\n  iframe.setAttribute('style', 'width:0;height:0;border:0;border:none;')\n  document.body.appendChild(iframe)\n}\n","export default (url, title = 'Login') => {\n  if (typeof window !== 'object') {\n    throw new Error('Method available for browser only')\n  }\n\n  const { screen } = window\n  let width\n  if (screen) {\n    // set window width based on screen width\n    if (screen.width >= 640) {\n      width = 640\n    } else {\n      width = screen.width\n    }\n  } else {\n    width = 380\n  }\n\n  // open new browser window\n  return window.open(url, title, `height=500,width=${width}`)\n}\n","export default (document, cname) => {\n  const name = cname + '='\n  const decodedCookie = decodeURIComponent(document.cookie)\n  const ca = decodedCookie.split(';')\n  for (let i = 0; i < ca.length; i++) {\n    let c = ca[i]\n    while (c.charAt(0) === ' ') {\n      c = c.substring(1)\n    }\n    if (c.indexOf(name) === 0) {\n      return c.substring(name.length, c.length)\n    }\n  }\n  return ''\n}\n","export default (document, cname, cvalue, exdays) => {\n  const d = new Date()\n  d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000))\n  const expires = 'expires=' + d.toUTCString()\n  document.cookie = cname + '=' + cvalue + ';' + expires + ';path=/'\n}\n","/**\n * @method\n * @name EcomPassport#checkAuthorization\n * @description Check session auth level (does not validate token).\n *\n * @returns {boolean}\n *\n * @example\n\necomPassport.checkAuthorization()\n\n */\n\nexport default ({ session, checkLogin }) => {\n  return Boolean(checkLogin() && session.auth && session.auth.level >= 2)\n}\n","/**\n * @method\n * @name EcomPassport#checkLogin\n * @description Check if customer is identified (does not validate authentication).\n *\n * @returns {boolean}\n *\n * @example\n\necomPassport.checkLogin()\n\n */\n\nexport default ({ getCustomerName }) => Boolean(getCustomerName())\n","/**\n * @method\n * @name EcomPassport#checkVerification\n * @description Check session biggest auth level (does not validate token).\n *\n * @returns {boolean}\n *\n * @example\n\necomPassport.checkVerification()\n\n */\n\nexport default ({ session, checkAuthorization }) => {\n  return Boolean(checkAuthorization() && session.auth.level >= 3)\n}\n","import { passport } from '@ecomplus/client'\n\n/**\n * @method\n * @name EcomPassport#fetchLogin\n * @description Try to identify/login user with email and doc number.\n *\n * @param {string} email - Customer main email address\n * @param {string} [docNumber] - Customer document number\n *\n * @returns {Promise<session|error>}\n *\n * @example\n\necomPassport.fetchLogin('example@mail.com', '1234567890')\n\n */\n\nexport default ({ storeId, setSession }, emitter, [email, docNumber = null]) => passport({\n  url: '/identify.json',\n  storeId,\n  method: 'POST',\n  data: {\n    email,\n    doc_number: docNumber\n  }\n}).then(({ data }) => {\n  setSession(data)\n  return data\n})\n","import { passport } from '@ecomplus/client'\n\n/**\n * @method\n * @name EcomPassport#fetchOauthProfile\n * @description Try get session and account data after social login.\n *\n * @returns {Promise<session|error>}\n *\n * @example\n\necomPassport.fetchOauthProfile().then(() => {\n  console.log(ecomPassport.checkVerification() === true)\n})\n\n */\n\nexport default ({ storeId, sessionId, setSession }) => passport({\n  url: `${sessionId}/token.json`,\n  storeId\n}).then(({ data }) => {\n  setSession(data)\n  return data\n})\n","import { passport } from '@ecomplus/client'\nimport createIframe from './../lib/create-iframe'\n\n/**\n * @method\n * @name EcomPassport#fetchOauthProviders\n * @description Fetch Passport API to list OAuth providers and start social login flux.\n *\n * @param {boolean} [canAppendIframe=true] - Whether iframe should be appended to body\n * to start oauth flux\n *\n * @returns {Promise<data|error>}\n *\n * @example\n\necomPassport.fetchOauthProviders()\n\n */\n\nexport default ({ storeId, sessionId }, emitter, [canAppendIframe = true]) => passport({\n  url: `${sessionId}/oauth-providers.json`,\n  storeId\n}).then(({ data }) => {\n  if (canAppendIframe) {\n    const { iframeUri } = data\n    createIframe(iframeUri)\n  }\n  return data\n})\n","import { store } from '@ecomplus/client'\n\n/**\n * @method\n * @name EcomPassport#fetchOrder\n * @description Fetch order by ID from Passport API (if authorized) or Store API (public).\n *\n * @param {string} orderId - Object ID (`_id`) of the order to be fetched\n *\n * @returns {Promise<data|error>}\n *\n * @example\n\necomPassport.fetchOrder(orderId).then(order => {\n  console.log(order._id)\n})\n\n */\n\nexport default ({ storeId, checkAuthorization, requestApi }, emitter, [orderId]) => {\n  const url = `/api/orders/${orderId}.json`\n  let req\n  if (checkAuthorization()) {\n    req = requestApi(url)\n  } else {\n    req = store({ url, storeId })\n  }\n  return req.then(({ data }) => data)\n}\n","import { store } from '@ecomplus/client'\n\n/**\n * @method\n * @name EcomPassport#fetchOrdersList\n * @description Fetch each order from customer's orders list.\n *\n * @param {number} [from=0] - Offset (start from) for pagination\n * @param {number} [size=10] - Limit of orders to fetch and list\n *\n * @returns {Promise<orders|error>}\n *\n * @example\n\necomPassport.fetchOrdersList().then(orders => {\n  orders.forEach(order => {\n    console.log(order.number)\n  })\n})\n\n */\n\nexport default ({ storeId, getCustomer }, emitter, [from = 0, size = 10]) => {\n  const requestPromises = []\n  const resultOrders = []\n  const sortOrdersFn = (a, b) => a.number > b.number ? -1 : 1\n\n  ;(getCustomer().orders || [])\n    .sort(sortOrdersFn).slice(from, from + size)\n    .forEach(({ _id }) => {\n      requestPromises.push(store({\n        url: `/orders/${_id}.json`,\n        storeId\n      })\n        .then(({ data }) => resultOrders.push(data)))\n    })\n\n  return Promise.all(requestPromises).then(() => resultOrders.sort(sortOrdersFn))\n}\n","import {\n  nickname as getNickname\n} from '@ecomplus/utils'\n\n/**\n * @method\n * @name EcomPassport#getCustomerName\n * @description Get nickname or given name from current customer account data.\n *\n * @returns {string}\n *\n * @example\n\necomPassport.getCustomerName()\n\n */\n\nexport default self => getNickname(self.getCustomer())\n","/**\n * @method\n * @name EcomPassport#getCustomer\n * @description Get current customer account object.\n *\n * @returns {object}\n *\n * @example\n\nconst customer = ecomPassport.getCustomer()\nconsole.log(customer.main_email)\n\n */\n\nexport default ({ customer }) => customer || {}\n","import getCookie from './../lib/get-cookie'\nimport setCookie from './../lib/set-cookie'\n\n/**\n * @method\n * @name EcomPassport#loadStoredSession\n * @description Try to load session object from cookie\n * and customer data from localStorage.\n *\n * @returns {self}\n *\n * @example\n\necomPassport.loadStoredSession()\n\n */\n\nexport default self => {\n  const { document, storageKey, localStorage, setSession } = self\n\n  if (storageKey) {\n    if (document) {\n      const sessionJson = getCookie(document, storageKey)\n      if (sessionJson) {\n        let session\n        try {\n          session = JSON.parse(sessionJson)\n        } catch (e) {\n          setCookie(document, storageKey, '', -1)\n          return self\n        }\n\n        if (localStorage) {\n          const customerJson = localStorage.getItem(storageKey)\n          if (customerJson) {\n            try {\n              session.customer = JSON.parse(customerJson)\n            } catch (e) {\n              localStorage.removeItem(storageKey)\n            }\n          }\n        }\n        if (!session.customer) {\n          session.customer = {}\n        }\n\n        setSession(session, false)\n      }\n    }\n  }\n\n  return self\n}\n","import setCookie from './../lib/set-cookie'\n\n/**\n * @method\n * @name EcomPassport#logout\n * @description Reset session and customer account object.\n *\n * @param {boolean} [canSave=true] - Save (reset) cookie and localStorage after logout\n *\n * @returns {self}\n *\n * @example\n\necomPassport.logout()\n\n */\n\nexport default (self, emitter, [canSave = true]) => {\n  const { document, storageKey, localStorage } = self\n\n  self.session = {}\n  self.customer = {}\n  if (canSave && storageKey) {\n    if (document) {\n      setCookie(document, storageKey, '', -1)\n    }\n    if (localStorage) {\n      localStorage.removeItem(storageKey)\n    }\n  }\n\n  /**\n   * @event EcomPassport#logout\n   * @example ecomPassport.on('logout', () => {\n   *   console.log(ecomPassport.checkLogin()) // false\n   * })\n   */\n  emitter.emit('logout')\n\n  return self\n}\n","/**\n * @method\n * @name EcomPassport#popupLogin\n * @description Open a new popup to default E-Com Plus Passport login window.\n *\n * @param {boolean} [canSkipLogin] - Whether customer can skip login and continue as guest\n * @param {string} [baseUri='https://passport.e-com.plus/v1/'] - Passport API base URI\n *\n * @returns {window|null}\n *\n * @example\n\necomPassport.popupLogin()\n\n */\n\nexport default (\n  { storeId, lang, sessionId, popupOauthLink },\n  emitter,\n  [canSkipLogin, baseUri = 'https://passport.e-com.plus/v1/']\n) => {\n  let url = `${baseUri}${lang}/${storeId}/${sessionId}/login.html`\n  if (canSkipLogin) {\n    url += '?enable_skip=true'\n  }\n  return popupOauthLink(url)\n}\n","import createPopup from './../lib/create-popup'\n\n/**\n * @method\n * @name EcomPassport#popupOauthLink\n * @description Open a new popup to received URL for OAuth and\n * try to fetch profile on callback or popup closed.\n *\n * @param {string} url - Popup URL (OAuth provider link)\n *\n * @returns {window|null}\n *\n * @example\n\necomPassport.popupOauthLink(facebookOauthLink)\n\n */\n\nexport default ({ fetchOauthProfile }, emitter, [url]) => {\n  let popupWatch = null\n\n  const getCustomerInfo = fromCallback => {\n    clearInterval(popupWatch)\n    fetchOauthProfile()\n  }\n\n  window.passportCallback = function () {\n    getCustomerInfo(true)\n  }\n\n  const popup = createPopup(url)\n  if (popup) {\n    if (typeof window === 'object' && window.focus) {\n      popup.focus()\n    }\n    popupWatch = setInterval(() => {\n      if (popup.closed) {\n        getCustomerInfo(false)\n      }\n    }, 400)\n  }\n\n  return popup\n}\n","import { passport } from '@ecomplus/client'\n\n/**\n * @method\n * @name EcomPassport#requestApi\n * @description Send request to E-Com Plus Passport API.\n *\n * @param {string} url - Passport API endpoint\n * @param {string} method - Request HTTP method\n * @param {object} [data] - Request body\n *\n * @returns {Promise<response|error>}\n *\n * @example\n\necomPassport.requestApi('/me.json', 'patch', { orders })\n  .then(({ data }) => {\n    console.log(data)\n  })\n\n */\n\nexport default (\n  { storeId, session, checkLogin, checkAuthorization, checkVerification, setCustomer },\n  emitter,\n  [url, method, data]\n) => {\n  if (method) {\n    method = method.toLowerCase()\n  } else {\n    method = 'get'\n  }\n\n  if (!checkLogin()) {\n    return Promise.reject(new Error('Unauthenticated, requires login'))\n  }\n  if (!checkAuthorization()) {\n    return Promise.reject(new Error('Unauthorized, requires login with OAuth or doc number'))\n  }\n  if (url.indexOf('api/') < 0) {\n    url = '/api' + (url.charAt(0) === '/' ? url : `/${url}`)\n  }\n\n  return passport({\n    url,\n    storeId,\n    customerId: session.auth.id,\n    accessToken: session.auth.token && session.auth.token.access_token,\n    method,\n    data\n  }).then(response => {\n    if (url.endsWith('/me.json') && method === 'patch') {\n      setCustomer(data)\n    }\n    return response\n  })\n}\n","/**\n * @method\n * @name EcomPassport#setCustomer\n * @description Set (assign) customer account object and save to local storage.\n *\n * @param {object} customer - Customer data (can be partial)\n * @param {boolean} [canSave=true] - Save to localStorage\n *\n * @returns {self}\n *\n * @example\n\necomPassport.setCustomer(customer)\n\n */\n\nexport default (self, emitter, [customer, canSave = true]) => {\n  if (typeof customer === 'object' && customer !== null && !Array.isArray(customer)) {\n    const { storageKey, localStorage } = self\n\n    Object.assign(self.customer, customer)\n    if (canSave && storageKey && localStorage) {\n      localStorage.setItem(storageKey, JSON.stringify(self.customer))\n    }\n  } else {\n    throw new Error('Customer must be an object')\n  }\n\n  return self\n}\n","import setCookie from './../lib/set-cookie'\n\n/**\n * @method\n * @name EcomPassport#setSession\n * @description Set session object and save to cookie.\n *\n * @param {object} session - Passport session object\n * @param {boolean} [canSave=true] - Save to cookie\n *\n * @returns {self}\n *\n * @example\n\necomPassport.setSession(session)\n\n */\n\nexport default (self, emitter, [session, canSave = true]) => {\n  const { document, storageKey, setCustomer, checkLogin } = self\n\n  if (typeof session !== 'object' || session === null || Array.isArray(session)) {\n    session = {}\n  } else if (session.customer) {\n    self.customer = {}\n    setCustomer(session.customer, canSave)\n    delete session.customer\n  }\n\n  self.session = session\n  if (canSave) {\n    setCookie(document, storageKey, JSON.stringify(session), 6)\n  }\n\n  if (checkLogin()) {\n    /**\n     * @event EcomPassport#login\n     * @example ecomPassport.on('login', () => {\n     *   console.log(ecomPassport.checkLogin()) // true\n     * })\n     */\n    emitter.emit('login')\n  }\n\n  return self\n}\n","'use strict';\nvar $ = require('../internals/export');\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar toLength = require('../internals/to-length');\nvar notARegExp = require('../internals/not-a-regexp');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar correctIsRegExpLogic = require('../internals/correct-is-regexp-logic');\nvar IS_PURE = require('../internals/is-pure');\n\nvar nativeEndsWith = ''.endsWith;\nvar min = Math.min;\n\nvar CORRECT_IS_REGEXP_LOGIC = correctIsRegExpLogic('endsWith');\n// https://github.com/zloirock/core-js/pull/702\nvar MDN_POLYFILL_BUG = !IS_PURE && !CORRECT_IS_REGEXP_LOGIC && !!function () {\n  var descriptor = getOwnPropertyDescriptor(String.prototype, 'endsWith');\n  return descriptor && !descriptor.writable;\n}();\n\n// `String.prototype.endsWith` method\n// https://tc39.github.io/ecma262/#sec-string.prototype.endswith\n$({ target: 'String', proto: true, forced: !MDN_POLYFILL_BUG && !CORRECT_IS_REGEXP_LOGIC }, {\n  endsWith: function endsWith(searchString /* , endPosition = @length */) {\n    var that = String(requireObjectCoercible(this));\n    notARegExp(searchString);\n    var endPosition = arguments.length > 1 ? arguments[1] : undefined;\n    var len = toLength(that.length);\n    var end = endPosition === undefined ? len : min(toLength(endPosition), len);\n    var search = String(searchString);\n    return nativeEndsWith\n      ? nativeEndsWith.call(that, search, end)\n      : that.slice(end - search.length, end) === search;\n  }\n});\n"],"sourceRoot":""}