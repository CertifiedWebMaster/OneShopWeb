{"version":3,"sources":["webpack:///../widget-truxtvox/src/index.js","webpack:///../widget-truxtvox/src/lib/comments-products.js","webpack:///../widget-truxtvox/src/lib/observer.js","webpack:///../widget-truxtvox/src/lib/rating-products.js","webpack:///../widget-truxtvox/src/lib/rating-search.js","webpack:///../widget-truxtvox/src/lib/rating-widget.js"],"names":["options","trustvoxStoreId","forEach","script","scriptEl","document","createElement","src","body","appendChild","ratingCards","ratingSearch","commentsProduct","console","error","Error","$productBlock","getElementById","context","window","_context","moConfig","childList","attributes","characterData","subtree","attributeOldValue","characterDataOldValue","ratingLink","$link","className","id","href","title","$shelfContainer","setAttribute","sku","$ratingClickHere","$ratingProduct","style","display","widgetIsRended","mo","$shelfProduct","parentElement","i","childNodes","callback","j","length","$productBlockNode","toRender","dataset","$productName","getElementsByClassName","parentNode","insertBefore","nextSibling","MutationObserver","observe","pictures","picture","normal","push","url","_trustvox","name","$trustvoxWidget","interval","setInterval","disconnect","clearInterval","el","config","observer","elClass","$productCards","skus","$ratingsBySku","$productCard","indexOf","$rating","newRatingWidget","$shelf","$productCardLink","querySelectorAll","_trustvox_shelf_rate","$search","productId","$div"],"mappings":"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","file":"3ed487d724690aa25273.js","sourcesContent":["import ratingCards from './lib/rating-products'\nimport commentsProduct from './lib/comments-products'\nimport ratingSearch from './lib/rating-search'\n\nexport default options => {\n  if (options && options.trustvoxStoreId) {\n    ;[\n      '//static.trustvox.com.br/assets/widget.js',\n      '//s3-sa-east-1.amazonaws.com/trustvox-rate-widget-js/widget.js'\n    ].forEach(script => {\n      const scriptEl = document.createElement('script')\n      scriptEl.src = script\n      document.body.appendChild(scriptEl)\n    })\n\n    ratingCards(options)\n    ratingSearch(options)\n    commentsProduct(options)\n  } else {\n    console.error(new Error('Can\\'t setup Trustvox widget without `trustvoxStoreId` option'))\n  }\n}\n","export default options => {\n  const $productBlock = document.getElementById('product')\n  const context = window._context.body\n\n  const moConfig = {\n    childList: false,\n    attributes: true,\n    characterData: true,\n    subtree: true,\n    attributeOldValue: true,\n    characterDataOldValue: true\n  }\n\n  if ($productBlock) {\n    const ratingLink = () => {\n      const $link = document.createElement('a')\n      $link.className = 'trustvox-fluid-jump trustvox-widget-rating product-widget-rating'\n      $link.id = 'trustvox-widget-rating'\n      $link.href = '#_trustvox_widget'\n      $link.title = 'Veja as opini√µes de quem comprou esse produto!'\n\n      const $shelfContainer = document.createElement('div')\n      $shelfContainer.className = 'trustvox-shelf-container'\n      $shelfContainer.setAttribute('data-trustvox-product-code', context.sku)\n      $link.appendChild($shelfContainer)\n\n      const $ratingClickHere = document.createElement('span')\n      $ratingClickHere.className = 'rating-click-here'\n      $link.appendChild($ratingClickHere)\n\n      return $link\n    }\n\n    const $ratingProduct = ratingLink()\n    $ratingProduct.style.display = 'none'\n    document.body.appendChild($ratingProduct)\n    let widgetIsRended = false\n\n    let mo = null\n    const $shelfProduct = $productBlock.parentElement\n    for (let i = 0; i < $shelfProduct.childNodes.length; i++) {\n      if ($shelfProduct.childNodes[i].id === 'product') {\n        const callback = () => {\n          for (let j = 0; j < $shelfProduct.childNodes[i].childNodes.length; j++) {\n            const $productBlockNode = $shelfProduct.childNodes[i].childNodes[j]\n            if ($productBlockNode.id === 'product-block') {\n              const { toRender } = $productBlockNode.dataset\n              if (!toRender) {\n                const $productName = document.getElementsByClassName('ec-product__name')[0]\n                if (!widgetIsRended && typeof $productName !== 'undefined') {\n                  $productName.parentNode.insertBefore($ratingProduct, $productName.nextSibling)\n                  $ratingProduct.style.display = 'inherit'\n                  widgetIsRended = true\n                }\n              }\n            }\n          }\n        }\n        mo = new window.MutationObserver(callback)\n        mo.observe($shelfProduct.childNodes[i], moConfig)\n      }\n    }\n\n    const pictures = []\n    context.pictures.forEach(picture => {\n      if (picture.normal) {\n        pictures.push(picture.normal.url)\n      }\n    })\n\n    window._trustvox = window._trustvox || []\n    window._trustvox.push(['_storeId', options.trustvoxStoreId])\n    window._trustvox.push(['_productId', context.sku])\n    window._trustvox.push(['_productName', context.name])\n    window._trustvox.push(['_productPhotos', pictures])\n\n    const $trustvoxWidget = document.createElement('div')\n    $trustvoxWidget.id = '_trustvox_widget'\n    document.getElementById('product').appendChild($trustvoxWidget)\n\n    const interval = setInterval(() => {\n      if (widgetIsRended) {\n        mo.disconnect()\n        clearInterval(interval)\n      }\n    }, 1000)\n  }\n}\n","export default (el, callback) => {\n  const config = {\n    childList: false,\n    attributes: true,\n    characterData: true,\n    subtree: true,\n    attributeOldValue: true,\n    characterDataOldValue: true\n  }\n  const observer = new window.MutationObserver(callback)\n  observer.observe(el, config)\n}\n","import observer from './observer'\nimport newRatingWidget from './rating-widget'\n\nexport default options => {\n  const elClass = 'product-card'\n  const $productCards = document.getElementsByClassName(elClass)\n\n  if ($productCards) {\n    const skus = []\n    const $ratingsBySku = {}\n\n    for (let i = 0; i < $productCards.length; i++) {\n      const $productCard = $productCards[i]\n      if ($productCard && $productCard.dataset) {\n        const { sku } = $productCard.dataset\n        if (skus.indexOf(sku) === -1) {\n          const $rating = newRatingWidget(sku)\n          $rating.style.display = 'none'\n          skus.push(sku)\n          $ratingsBySku[sku] = $rating\n          document.body.appendChild($rating)\n        }\n\n        const $shelf = $productCard.parentElement\n        observer($shelf, () => {\n          for (let i = 0; i < $shelf.childNodes.length; i++) {\n            const $productCard = $shelf.childNodes[i]\n            const { sku, toRender } = $productCard.dataset\n            if (!toRender) {\n              if (skus.indexOf(sku) > -1) {\n                const $rating = $ratingsBySku[sku]\n                const $productCardLink = document.querySelectorAll(`[data-sku=\"${sku}\"] .ec-product-card__link`)\n                if ($productCardLink.length) {\n                  for (let j = 0; j < $productCardLink.length; j++) {\n                    $productCardLink[j].appendChild($rating)\n                  }\n                  $rating.style.display = 'inherit'\n                }\n              }\n            }\n          }\n        })\n      }\n    }\n\n    window._trustvox_shelf_rate = window._trustvox_shelf_rate || []\n    window._trustvox_shelf_rate.push(['_storeId', options.trustvoxStoreId])\n  }\n}\n","import observer from './observer'\nimport newRatingWidget from './rating-widget'\n\nexport default () => {\n  const $search = document.getElementById('search')\n\n  if ($search) {\n    observer($search, () => {\n      const $productCards = document.querySelectorAll('#search-engine .product-card')\n\n      for (let i = 0; i < $productCards.length; i++) {\n        const $productCard = $productCards[i]\n        const { sku } = $productCard.dataset\n        const $productCardLink = document.querySelectorAll(`[data-sku=\"${sku}\"] .ec-product-card__link`)\n\n        if ($productCardLink.length) {\n          const $rating = newRatingWidget(sku)\n          for (let j = 0; j < $productCardLink.length; j++) {\n            $productCardLink[j].appendChild($rating)\n          }\n        }\n      }\n\n      window._trustvox_shelf_rate.push(['_productContainer', '#search'])\n    })\n  }\n}\n","export default productId => {\n  const $div = document.createElement('div')\n  $div.setAttribute('data-trustvox-product-code', productId)\n  return $div\n}\n"],"sourceRoot":""}