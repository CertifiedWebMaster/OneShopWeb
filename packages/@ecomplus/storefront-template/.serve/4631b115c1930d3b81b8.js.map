{"version":3,"sources":["webpack:////home/leo/code/storefront-template/node_modules/@ecomplus/widget-product-card/src/components/EcProductCard.vue","webpack:////home/leo/code/storefront-template/node_modules/@ecomplus/widget-product-card/src/components/html/EcProductCard.html","webpack:////home/leo/code/storefront-template/node_modules/@ecomplus/widget-product-card/src/components/js/EcProductCard.js?b07c","webpack:////home/leo/code/storefront-template/node_modules/@ecomplus/widget-product-card/src/components/scss/EcProductCard.scss?ec24","webpack:////home/leo/code/storefront-template/node_modules/@ecomplus/widget-product-card/src/components/scss/EcProductCard.scss?4399","webpack:////home/leo/code/storefront-template/node_modules/@ecomplus/widget-product-card/src/components/html/EcProductCard.html?d5e2","webpack:////home/leo/code/storefront-template/node_modules/@ecomplus/widget-product-card/src/components/js/EcProductCard.js"],"names":["name","components","EcImage","EcPrices","props","lang","type","String","default","$ecomConfig","get","storeId","Number","productId","product","Object","buyText","canAddToCart","Boolean","isLoaded","data","body","isLoading","error","computed","strBuy","dictionary","isActive","available","visible","inStock","discount","onPromotion","Math","round","base_price","price","methods","setBody","assign","body_html","body_text","fetchItem","store","url","then","$emit","catch","err","console","slug","pictures","finally","buy","variations","length","window","location","ecomCart","addProduct","created","undefined"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAA4G;AACzC;AACL;AACkB;;;AAGhF;AAC0I;AAC1I,gBAAgB,iJAAU;AAC1B,EAAE,qFAAM;AACR,EAAE,wGAAM;AACR,EAAE,iHAAe;AACjB;AACA;AACA;AACA;;AAEA;;AAEA;AACA,IAAI,KAAU,EAAE,YAiBf;AACD;AACe,gF;;;;;;;;;;;;ACvCf;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA,wCAAwK,CAAgB,oOAAG,EAAC,C;;;;;;;;;;;;ACA5L;AAAA;AAAA;AAAA;AAA0lB,CAAgB,wkBAAG,EAAC,C;;;;;;;;;;;ACA9mB,uC;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,wBAAwB,SAAS,0CAA0C,EAAE;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,8CAA8C;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,yBAAyB,2CAA2C;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC,+BAA+B;AAC/B;AACA;AACA,+BAA+B;AAC/B;AACA;AACA;AACA;AACA,gCAAgC,uCAAuC;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,qCAAqC;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,kCAAkC;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC,+BAA+B;AAC/B;AAC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","file":"4631b115c1930d3b81b8.js","sourcesContent":["import { render, staticRenderFns } from \"./html/EcProductCard.html?vue&type=template&id=0bf1bdeb&lang=html&\"\nimport script from \"./js/EcProductCard.js?vue&type=script&lang=js&\"\nexport * from \"./js/EcProductCard.js?vue&type=script&lang=js&\"\nimport style0 from \"./scss/EcProductCard.scss?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../packages/@ecomplus/storefront-template/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/leo/code/storefront-template/packages/@ecomplus/storefront-template/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('0bf1bdeb')) {\n      api.createRecord('0bf1bdeb', component.options)\n    } else {\n      api.reload('0bf1bdeb', component.options)\n    }\n    module.hot.accept(\"./html/EcProductCard.html?vue&type=template&id=0bf1bdeb&lang=html&\", function () {\n      api.rerender('0bf1bdeb', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"node_modules/@ecomplus/widget-product-card/src/components/EcProductCard.vue\"\nexport default component.exports","export * from \"-!../../../../../../packages/@ecomplus/storefront-framework/node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./EcProductCard.html?vue&type=template&id=0bf1bdeb&lang=html&\"","import mod from \"-!../../../../../../packages/@ecomplus/storefront-template/node_modules/babel-loader/lib/index.js??ref--1!./EcProductCard.js?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../packages/@ecomplus/storefront-template/node_modules/babel-loader/lib/index.js??ref--1!./EcProductCard.js?vue&type=script&lang=js&\"","import mod from \"-!../../../../../../packages/@ecomplus/storefront-framework/node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../../packages/@ecomplus/storefront-template/node_modules/css-loader/dist/cjs.js!../../../../../../packages/@ecomplus/storefront-framework/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../packages/@ecomplus/storefront-template/node_modules/postcss-loader/src/index.js??postcss!../../../../../../packages/@ecomplus/storefront-template/node_modules/sass-loader/dist/cjs.js??ref--0-3!./EcProductCard.scss?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../../packages/@ecomplus/storefront-framework/node_modules/mini-css-extract-plugin/dist/loader.js!../../../../../../packages/@ecomplus/storefront-template/node_modules/css-loader/dist/cjs.js!../../../../../../packages/@ecomplus/storefront-framework/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../packages/@ecomplus/storefront-template/node_modules/postcss-loader/src/index.js??postcss!../../../../../../packages/@ecomplus/storefront-template/node_modules/sass-loader/dist/cjs.js??ref--0-3!./EcProductCard.scss?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    {\n      staticClass: \"ec-product-card\",\n      class: _vm.body._id && !_vm.isActive ? \"ec-product-card--inactive\" : null\n    },\n    [\n      _c(\"transition\", { attrs: { \"enter-active-class\": \"animated fadeIn\" } }, [\n        !_vm.isLoading\n          ? _c(\n              \"section\",\n              [\n                _vm._t(\"discount-tag\", [\n                  _vm.isActive && _vm.discount > 0\n                    ? _c(\n                        \"span\",\n                        { staticClass: \"ec-product-card__offer-stamp\" },\n                        [\n                          _vm._v(\"\\n          -\"),\n                          _c(\"b\", [_vm._v(_vm._s(_vm.discount))]),\n                          _vm._v(\"%\\n        \")\n                        ]\n                      )\n                    : _vm._e()\n                ]),\n                _vm._v(\" \"),\n                _vm._t(\"body\", [\n                  _c(\n                    \"a\",\n                    {\n                      staticClass: \"ec-product-card__link\",\n                      attrs: {\n                        href: \"/\" + _vm.body.slug,\n                        title: _vm.name(_vm.body)\n                      }\n                    },\n                    [\n                      _c(\n                        \"div\",\n                        { staticClass: \"ec-product-card__pictures\" },\n                        [\n                          _vm.body.pictures && _vm.body.pictures.length\n                            ? _vm._l(_vm.body.pictures.slice(0, 2), function(\n                                picture,\n                                index\n                              ) {\n                                return _c(\"ec-image\", {\n                                  key: index,\n                                  staticClass: \"ec-product-card__picture\",\n                                  attrs: {\n                                    src: picture,\n                                    pictureBreakpoint: 300\n                                  }\n                                })\n                              })\n                            : _c(\"ec-image\", {\n                                staticClass: \"ec-product-card__picture\"\n                              })\n                        ],\n                        2\n                      ),\n                      _vm._v(\" \"),\n                      _c(\"h3\", { staticClass: \"ec-product-card__name\" }, [\n                        _vm._v(\n                          \"\\n            \" +\n                            _vm._s(_vm.name(_vm.body)) +\n                            \"\\n          \"\n                        )\n                      ])\n                    ]\n                  )\n                ]),\n                _vm._v(\" \"),\n                !_vm.body.available || !_vm.body.visible\n                  ? _vm._t(\"unavailable\", [\n                      _c(\"p\", { staticClass: \"badge badge-warning\" }, [\n                        _vm._v(\n                          \"\\n          \" +\n                            _vm._s(_vm.dictionary(\"unavailable\")) +\n                            \"\\n        \"\n                        )\n                      ])\n                    ])\n                  : !_vm.inStock(_vm.body)\n                  ? _vm._t(\"out-of-stock\", [\n                      _c(\"p\", { staticClass: \"badge badge-dark\" }, [\n                        _vm._v(\n                          \"\\n          \" +\n                            _vm._s(_vm.dictionary(\"out_of_stock\")) +\n                            \"\\n        \"\n                        )\n                      ])\n                    ])\n                  : [\n                      _vm._t(\"prices\", [\n                        _c(\"ec-prices\", {\n                          staticClass: \"ec-product-card__prices\",\n                          attrs: { lang: _vm.lang, product: _vm.body }\n                        })\n                      ]),\n                      _vm._v(\" \"),\n                      _c(\n                        \"div\",\n                        {\n                          staticClass: \"ec-product-card__buy fade\",\n                          on: { click: _vm.buy }\n                        },\n                        [\n                          _vm._t(\"buy\", [\n                            _c(\n                              \"button\",\n                              {\n                                staticClass: \"btn btn-block btn-primary\",\n                                attrs: { type: \"button\" }\n                              },\n                              [\n                                _c(\"i\", {\n                                  staticClass: \"fas fa-shopping-bag mr-1\"\n                                }),\n                                _vm._v(\n                                  \"\\n              \" +\n                                    _vm._s(_vm.strBuy) +\n                                    \"\\n            \"\n                                )\n                              ]\n                            )\n                          ])\n                        ],\n                        2\n                      )\n                    ],\n                _vm._v(\" \"),\n                _vm._t(\"footer\")\n              ],\n              2\n            )\n          : _vm._e()\n      ]),\n      _vm._v(\" \"),\n      _vm.isLoading\n        ? [\n            _vm._t(\"default\"),\n            _vm._v(\" \"),\n            _vm.error\n              ? _c(\n                  \"div\",\n                  {\n                    staticClass: \"alert alert-warning small\",\n                    attrs: { role: \"alert\" }\n                  },\n                  [_vm._v(\"\\n      \" + _vm._s(_vm.error) + \"\\n    \")]\n                )\n              : _vm._e()\n          ]\n        : _vm._e()\n    ],\n    2\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import { $ecomConfig, name, inStock, onPromotion, price } from '@ecomplus/utils'\nimport { store } from '@ecomplus/client'\nimport ecomCart from '@ecomplus/shopping-cart'\nimport dictionary from '@ecomplus/widget-product/src/lib/dictionary'\nimport EcImage from '@ecomplus/widget-product/src/components/EcImage.vue'\nimport EcPrices from '@ecomplus/widget-product/src/components/EcPrices.vue'\n\nexport default {\n  name: 'EcProductCard',\n\n  components: {\n    EcImage,\n    EcPrices\n  },\n\n  props: {\n    lang: {\n      type: String,\n      default: $ecomConfig.get('lang')\n    },\n    storeId: {\n      type: Number,\n      default: $ecomConfig.get('store_id')\n    },\n    productId: String,\n    product: Object,\n    buyText: String,\n    canAddToCart: {\n      type: Boolean,\n      default: true\n    },\n    isLoaded: Boolean\n  },\n\n  data () {\n    return {\n      body: {},\n      isLoading: false,\n      error: ''\n    }\n  },\n\n  computed: {\n    strBuy () {\n      return this.buyText || this.dictionary('buy')\n    },\n\n    isActive () {\n      const { body } = this\n      return body.available && body.visible && inStock(body)\n    },\n\n    discount () {\n      const { body } = this\n      return onPromotion(body)\n        ? Math.round(((body.base_price - price(body)) * 100) / body.base_price)\n        : 0\n    }\n  },\n\n  methods: {\n    dictionary,\n    name,\n    inStock,\n\n    setBody (data) {\n      this.body = Object.assign({}, data)\n      delete this.body.body_html\n      delete this.body.body_text\n    },\n\n    fetchItem () {\n      if (this.productId) {\n        this.isLoading = true\n        const { storeId, productId } = this\n        store({ url: `/products/${productId}.json`, storeId })\n          .then(({ data }) => {\n            this.$emit('update:product', data)\n            this.setBody(data)\n            this.$emit('update:is-loaded', true)\n          })\n          .catch(err => {\n            console.error(err)\n            if (!this.body.name || !this.body.slug || !this.body.pictures) {\n              this.error = this.lang === 'pt_br'\n                ? 'Erro de conexão, clique no produto para tentar novamente'\n                : 'Connection error, click product to try again'\n            }\n          })\n          .finally(() => {\n            this.isLoading = false\n          })\n      }\n    },\n\n    buy () {\n      const product = this.body\n      this.$emit('buy', { product })\n      if (this.canAddToCart) {\n        const { variations, slug } = product\n        if (variations && variations.length) {\n          window.location = `/${slug}`\n        } else {\n          ecomCart.addProduct(product)\n        }\n      }\n    }\n  },\n\n  created () {\n    if (this.product) {\n      this.setBody(this.product)\n      if (this.product.available === undefined) {\n        this.body.available = true\n      }\n      if (this.product.visible === undefined) {\n        this.body.visible = true\n      }\n    }\n    if (!this.isLoaded) {\n      this.fetchItem()\n    }\n  }\n}\n"],"sourceRoot":""}