{"version":3,"sources":["webpack:////home/leo/code/storefront-template/node_modules/core-js/internals/string-repeat.js","webpack:////home/leo/code/storefront-template/node_modules/core-js/internals/this-number-value.js","webpack:////home/leo/code/storefront-template/node_modules/core-js/modules/es.number.to-fixed.js","webpack:///../widget-tag-manager/src/index.js","webpack:///../widget-tag-manager/src/lib/common.js","webpack:///../widget-tag-manager/src/lib/parse-context.js","webpack:///../widget-tag-manager/src/lib/parse-dom.js","webpack:///../widget-tag-manager/src/lib/watch-app-routes.js","webpack:///../widget-tag-manager/src/lib/watch-shopping-cart.js"],"names":["options","dataLayerVar","parseDomMsDelay","dataLayer","window","parseContext","watchAppRoutes","watchShoppingCart","setTimeout","parseDom","currencyCode","$ecomConfig","get","getProductData","item","productData","name","id","sku","price","toFixed","quantity","context","storefront","resource","body","data","event","ecommerce","detail","products","categories","categoriesList","length","category","category_tree","replace","actionField","list","brands","brand","push","$products","document","querySelectorAll","skus","listNameBySku","isSearchPage","location","pathname","i","$product","dataset","indexOf","closest","$carousel","title","impressions","map","listName","router","storefrontApp","isCartSent","getCartProductsList","ecomCart","Array","isArray","items","forEach","emitCheckout","step","option","checkout","checkout_option","emitPurchase","orderId","amount","revenue","total","subtotal","purchase","addRouteToData","params","currentRoute","afterEach","productsBySku","emitAddToCart","add","emitRemoveFromCart","remove","Object","assign","on"],"mappings":";;;;;;;;;;AAAa;AACb,gBAAgB,mBAAO,CAAC,sFAAyB;AACjD,6BAA6B,mBAAO,CAAC,kHAAuC;;AAE5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,MAAM;AACd;AACA;;;;;;;;;;;;ACbA,cAAc,mBAAO,CAAC,wFAA0B;;AAEhD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACTa;AACb,QAAQ,mBAAO,CAAC,8EAAqB;AACrC,gBAAgB,mBAAO,CAAC,sFAAyB;AACjD,sBAAsB,mBAAO,CAAC,oGAAgC;AAC9D,aAAa,mBAAO,CAAC,4FAA4B;AACjD,YAAY,mBAAO,CAAC,4EAAoB;;AAExC;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB,CAAC;;AAED;AACA;AACA,GAAG,gDAAgD;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,CAAC;;;;;;;;;;;;;AC7HD;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAEe,2EAAkB;AAAA,MAAjBA,OAAiB,uEAAP,EAAO;AAAA,MACvBC,YADuB,GACWD,OADX,CACvBC,YADuB;AAAA,MACTC,eADS,GACWF,OADX,CACTE,eADS;AAE/B,MAAMC,SAAS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","file":"3ca49855b4ae6d117a95.js","sourcesContent":["'use strict';\nvar toInteger = require('../internals/to-integer');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\n// `String.prototype.repeat` method implementation\n// https://tc39.github.io/ecma262/#sec-string.prototype.repeat\nmodule.exports = ''.repeat || function repeat(count) {\n  var str = String(requireObjectCoercible(this));\n  var result = '';\n  var n = toInteger(count);\n  if (n < 0 || n == Infinity) throw RangeError('Wrong number of repetitions');\n  for (;n > 0; (n >>>= 1) && (str += str)) if (n & 1) result += str;\n  return result;\n};\n","var classof = require('../internals/classof-raw');\n\n// `thisNumberValue` abstract operation\n// https://tc39.github.io/ecma262/#sec-thisnumbervalue\nmodule.exports = function (value) {\n  if (typeof value != 'number' && classof(value) != 'Number') {\n    throw TypeError('Incorrect invocation');\n  }\n  return +value;\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar toInteger = require('../internals/to-integer');\nvar thisNumberValue = require('../internals/this-number-value');\nvar repeat = require('../internals/string-repeat');\nvar fails = require('../internals/fails');\n\nvar nativeToFixed = 1.0.toFixed;\nvar floor = Math.floor;\n\nvar pow = function (x, n, acc) {\n  return n === 0 ? acc : n % 2 === 1 ? pow(x, n - 1, acc * x) : pow(x * x, n / 2, acc);\n};\n\nvar log = function (x) {\n  var n = 0;\n  var x2 = x;\n  while (x2 >= 4096) {\n    n += 12;\n    x2 /= 4096;\n  }\n  while (x2 >= 2) {\n    n += 1;\n    x2 /= 2;\n  } return n;\n};\n\nvar FORCED = nativeToFixed && (\n  0.00008.toFixed(3) !== '0.000' ||\n  0.9.toFixed(0) !== '1' ||\n  1.255.toFixed(2) !== '1.25' ||\n  1000000000000000128.0.toFixed(0) !== '1000000000000000128'\n) || !fails(function () {\n  // V8 ~ Android 4.3-\n  nativeToFixed.call({});\n});\n\n// `Number.prototype.toFixed` method\n// https://tc39.github.io/ecma262/#sec-number.prototype.tofixed\n$({ target: 'Number', proto: true, forced: FORCED }, {\n  // eslint-disable-next-line max-statements\n  toFixed: function toFixed(fractionDigits) {\n    var number = thisNumberValue(this);\n    var fractDigits = toInteger(fractionDigits);\n    var data = [0, 0, 0, 0, 0, 0];\n    var sign = '';\n    var result = '0';\n    var e, z, j, k;\n\n    var multiply = function (n, c) {\n      var index = -1;\n      var c2 = c;\n      while (++index < 6) {\n        c2 += n * data[index];\n        data[index] = c2 % 1e7;\n        c2 = floor(c2 / 1e7);\n      }\n    };\n\n    var divide = function (n) {\n      var index = 6;\n      var c = 0;\n      while (--index >= 0) {\n        c += data[index];\n        data[index] = floor(c / n);\n        c = (c % n) * 1e7;\n      }\n    };\n\n    var dataToString = function () {\n      var index = 6;\n      var s = '';\n      while (--index >= 0) {\n        if (s !== '' || index === 0 || data[index] !== 0) {\n          var t = String(data[index]);\n          s = s === '' ? t : s + repeat.call('0', 7 - t.length) + t;\n        }\n      } return s;\n    };\n\n    if (fractDigits < 0 || fractDigits > 20) throw RangeError('Incorrect fraction digits');\n    // eslint-disable-next-line no-self-compare\n    if (number != number) return 'NaN';\n    if (number <= -1e21 || number >= 1e21) return String(number);\n    if (number < 0) {\n      sign = '-';\n      number = -number;\n    }\n    if (number > 1e-21) {\n      e = log(number * pow(2, 69, 1)) - 69;\n      z = e < 0 ? number * pow(2, -e, 1) : number / pow(2, e, 1);\n      z *= 0x10000000000000;\n      e = 52 - e;\n      if (e > 0) {\n        multiply(0, z);\n        j = fractDigits;\n        while (j >= 7) {\n          multiply(1e7, 0);\n          j -= 7;\n        }\n        multiply(pow(10, j, 1), 0);\n        j = e - 1;\n        while (j >= 23) {\n          divide(1 << 23);\n          j -= 23;\n        }\n        divide(1 << j);\n        multiply(1, 1);\n        divide(2);\n        result = dataToString();\n      } else {\n        multiply(0, z);\n        multiply(1 << -e, 0);\n        result = dataToString() + repeat.call('0', fractDigits);\n      }\n    }\n    if (fractDigits > 0) {\n      k = result.length;\n      result = sign + (k <= fractDigits\n        ? '0.' + repeat.call('0', fractDigits - k) + result\n        : result.slice(0, k - fractDigits) + '.' + result.slice(k - fractDigits));\n    } else {\n      result = sign + result;\n    } return result;\n  }\n});\n","import parseContext from './lib/parse-context'\nimport parseDom from './lib/parse-dom'\nimport watchAppRoutes from './lib/watch-app-routes'\nimport watchShoppingCart from './lib/watch-shopping-cart'\n\nexport default (options = {}) => {\n  const { dataLayerVar, parseDomMsDelay } = options\n  const dataLayer = window[dataLayerVar] || window.dataLayer\n\n  if (dataLayer) {\n    parseContext(dataLayer)\n    watchAppRoutes(dataLayer)\n    watchShoppingCart(dataLayer)\n\n    setTimeout(() => {\n      parseDom(dataLayer)\n    }, parseDomMsDelay >= 0 ? parseDomMsDelay : 300)\n  }\n}\n","import { $ecomConfig, name, price } from '@ecomplus/utils'\n\nexport const currencyCode = $ecomConfig.get('currency') || 'BRL'\n\nexport const getProductData = item => {\n  const productData = {\n    name: name(item),\n    id: item.sku,\n    price: price(item).toFixed(2)\n  }\n  if (item.quantity) {\n    productData.quantity = item.quantity\n  }\n  return productData\n}\n","import { categoriesList } from '@ecomplus/utils'\nimport { currencyCode, getProductData } from './common'\n\nexport default dataLayer => {\n  const context = window.storefront && window.storefront.context\n  if (context && context.resource === 'products') {\n    const { body } = context\n\n    const productData = getProductData(body)\n    const data = {\n      event: 'eec.detail',\n      ecommerce: {\n        currencyCode,\n        detail: {\n          products: [productData]\n        }\n      }\n    }\n\n    const categories = categoriesList(body)\n    if (categories.length) {\n      productData.category = body.category_tree\n        ? body.category_tree.replace(/\\s>\\s/g, '/') : categories[0]\n      data.ecommerce.detail.actionField = {\n        list: categories[0]\n      }\n    }\n    if (body.brands && body.brands.length) {\n      productData.brand = body.brands[0].name\n    }\n\n    dataLayer.push(data)\n  }\n}\n","import { currencyCode } from './common'\n\nexport default dataLayer => {\n  const $products = document.querySelectorAll('[data-sku]')\n  if ($products.length) {\n    const skus = []\n    const listNameBySku = {}\n    const isSearchPage = window.location.pathname === '/search'\n\n    for (let i = 0; i < $products.length; i++) {\n      const $product = $products[i]\n      const { sku } = $product.dataset\n      if (skus.indexOf(sku) === -1) {\n        skus.push(sku)\n\n        if ($product.closest) {\n          const $carousel = $product.closest('.products-carousel')\n          if (!isSearchPage && $carousel) {\n            listNameBySku[sku] = $carousel.dataset.title\n          }\n        }\n      }\n    }\n\n    dataLayer.push({\n      event: 'eec.impressions',\n      ecommerce: {\n        currencyCode,\n        impressions: skus.map(sku => {\n          const listName = isSearchPage ? 'Search results' : listNameBySku[sku]\n          const item = { id: sku }\n          if (listName) {\n            item.list = listName\n          }\n          return item\n        })\n      }\n    })\n  }\n}\n","import ecomCart from '@ecomplus/shopping-cart'\nimport { currencyCode, getProductData } from './common'\n\nexport default dataLayer => {\n  const router = window.storefrontApp && window.storefrontApp.router\n  if (router) {\n    let isCartSent = false\n    const getCartProductsList = () => {\n      const products = []\n      if (ecomCart.data && Array.isArray(ecomCart.data.items)) {\n        ecomCart.data.items.forEach(item => {\n          products.push(getProductData(item))\n        })\n      }\n      return products\n    }\n\n    const emitCheckout = (step, option) => {\n      const actionField = { step, option }\n      if (step <= 1 || !isCartSent) {\n        dataLayer.push({\n          event: 'eec.checkout',\n          ecommerce: {\n            currencyCode,\n            checkout: {\n              actionField,\n              products: getCartProductsList()\n            }\n          }\n        })\n        dataLayer.push({ event: 'checkout' })\n        isCartSent = true\n      } else {\n        dataLayer.push({\n          event: 'eec.checkout_option',\n          ecommerce: {\n            currencyCode,\n            checkout_option: { actionField }\n          }\n        })\n        dataLayer.push({ event: 'checkoutOption' })\n      }\n    }\n\n    const emitPurchase = orderId => {\n      const { amount } = window.storefrontApp\n      const revenue = (\n        (amount && amount.total) ||\n        (ecomCart.data && ecomCart.data.subtotal) ||\n        0\n      ).toFixed(2)\n\n      dataLayer.push({\n        event: 'eec.purchase',\n        ecommerce: {\n          currencyCode,\n          purchase: {\n            actionField: {\n              id: orderId,\n              revenue\n            },\n            products: getCartProductsList()\n          }\n        }\n      })\n    }\n\n    const addRouteToData = ({ name, params }) => {\n      switch (name) {\n        case 'cart':\n          emitCheckout(1, 'Review Cart')\n          break\n        case 'checkout':\n          emitCheckout(2, 'Confirm Purchase')\n          break\n        case 'confirmation':\n          emitPurchase(params.id)\n          break\n      }\n    }\n\n    if (router.currentRoute) {\n      addRouteToData(router.currentRoute)\n    }\n    router.afterEach(addRouteToData)\n  }\n}\n","import ecomCart from '@ecomplus/shopping-cart'\nimport { currencyCode, getProductData } from './common'\n\nexport default dataLayer => {\n  const productsBySku = {}\n\n  const emitAddToCart = item => {\n    const productData = getProductData(item)\n    dataLayer.push({\n      event: 'eec.add',\n      ecommerce: {\n        currencyCode,\n        add: {\n          products: [productData]\n        }\n      }\n    })\n    dataLayer.push({ event: 'addToCart' })\n    productsBySku[item.sku] = productData\n  }\n\n  const emitRemoveFromCart = item => {\n    const productData = productsBySku[item.sku]\n    dataLayer.push({\n      event: 'eec.remove',\n      ecommerce: {\n        currencyCode,\n        remove: {\n          products: [\n            (productData ? Object.assign({}, productData) : getProductData(item))\n          ]\n        }\n      }\n    })\n    dataLayer.push({ event: 'removeFromCart' })\n    delete productsBySku[item.sku]\n  }\n\n  ecomCart.on('addItem', ({ item }) => emitAddToCart(item))\n\n  ecomCart.on('increaseItemQnt', ({ item }) => {\n    const productData = productsBySku[item.sku]\n    if (!productData) {\n      emitAddToCart(item)\n    } else {\n      const quantity = item.quantity - productData.quantity\n      if (quantity > 0) {\n        emitAddToCart({ ...item, quantity })\n      } else {\n        emitRemoveFromCart({\n          ...item,\n          quantity: -quantity\n        })\n      }\n    }\n  })\n\n  ecomCart.on('removeItem', ({ item }) => emitRemoveFromCart(item))\n\n  ecomCart.on('clear', () => {\n    for (const sku in productsBySku) {\n      if (productsBySku[sku]) {\n        emitRemoveFromCart(productsBySku[sku])\n      }\n    }\n  })\n}\n"],"sourceRoot":""}