(window["webpackJsonp_storefront_app"]=window["webpackJsonp_storefront_app"]||[]).push([["order"],{"0564":function(e,t,i){var s=i("57e5");"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var r=i("0ed3").default;r("120f2504",s,!0,{sourceMap:!1,shadowMode:!1})},"0d4d":function(e,t,i){var s=i("3c10");t=s(!1),t.push([e.i,".ec-order{min-height:300px}",""]),e.exports=t},"1ac7":function(e,t,i){var s=i("3c10");t=s(!1),t.push([e.i,".ec-order-info__new{text-align:center;color:var(--success);font-size:1.4rem;margin-bottom:2rem}.ec-order-info__orders-link{margin-top:1.5rem}.ec-order-info__number{color:var(--gray)}.ec-order-info__number span{display:block;color:var(--secondary)}.ec-order-info__details{margin-top:.75rem;margin-bottom:1.5rem}.ec-order-info__financial-status,.ec-order-info__status{font-weight:700;font-size:1.15rem;margin:1rem 0}.ec-order-info__status--open{color:var(--info)}.ec-order-info__status--cancelled{color:var(--danger)}.ec-order-info__status--closed{color:var(--success)}.ec-order-info__financial-status--pending{color:var(--warning)}.ec-order-info__financial-status--under_analysis{color:var(--info)}.ec-order-info__financial-status--in_dispute,.ec-order-info__financial-status--unauthorized,.ec-order-info__financial-status--voided{color:var(--danger)}.ec-order-info__financial-status--paid{color:var(--success)}.ec-order-info__summary{background:var(--light)}.ec-order-info__toggle{display:block;margin-left:auto;margin-top:1.5rem}",""]),e.exports=t},"350e":function(e,t,i){"use strict";var s=i("9d1f"),r=i.n(s);r.a},"3ef4":function(e,t,i){"use strict";var s=i("4af7"),r=i.n(s);r.a},"446f":function(e,t,i){var s=i("3c10");t=s(!1),t.push([e.i,".ec-shipping-line__address{margin-top:1rem}",""]),e.exports=t},"4af7":function(e,t,i){var s=i("446f");"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var r=i("0ed3").default;r("0421f714",s,!0,{sourceMap:!1,shadowMode:!1})},"57e5":function(e,t,i){var s=i("3c10");t=s(!1),t.push([e.i,".ec-summary__item{display:-webkit-box;display:flex;-webkit-box-align:start;align-items:flex-start;overflow-x:hidden;margin-bottom:.5rem}.ec-summary__item a{color:inherit}.ec-summary__item img{-webkit-box-flex:0;flex:0 0 50px;height:auto;margin-right:.5rem}.ec-summary__item small{line-height:1.3;display:inline-block}.ec-summary__amount{margin:1.5rem 0;padding:.75rem 0;border-top:1px dotted var(--gray)}.ec-summary__amount:last-child{margin-bottom:0;padding-bottom:0}.ec-summary__amount__row{display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between;-webkit-box-align:center;align-items:center;margin-top:.25rem}.ec-summary__amount__row>span{font-weight:300}.ec-summary__amount__row>span small{display:block;line-height:1.15;color:var(--gray)}.ec-summary__amount__row--total{margin-top:.5rem;font-size:1.25rem}.ec-summary__amount__row--total>div{font-weight:700}.ec-summary__amount__row--total strong{color:var(--secondary)}",""]),e.exports=t},8225:function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("article",{staticClass:"ec-summary"},[i("h5",{staticClass:"ec-summary__title"},[e._v(" "+e._s(e.i19summary)+" ")]),e._t("list",[e.items?i("div",{staticClass:"ec-summary__list"},e._l(e.items,(function(t){return i("div",{staticClass:"ec-summary__item"},[e.img(t)?i("img",{attrs:{src:e.img(t).url,alt:e.img(t).alt}}):e._e(),i("div",[i("span",{staticClass:"badge badge-secondary"},[e._v(" "+e._s(t.quantity)+" ")]),e._v(" "+e._s(e.formatMoney(e.price(t)))+" "),i("br"),t.slug?i("a",{attrs:{href:"/"+t.slug,target:"_blank"}},[i("small",[e._v(e._s(e.name(t)))])]):i("small",[e._v(e._s(e.name(t)))])])])})),0):e._e()]),e._t("amount",[i("div",{staticClass:"ec-summary__amount"},[i("div",{staticClass:"ec-summary__amount__row"},[i("span",[e._v(e._s(e.i19subtotal))]),i("div",[e._v(e._s(e.formatMoney(e.amount.subtotal)))])]),i("div",{staticClass:"ec-summary__amount__row"},[i("span",[e._v(" "+e._s(e.i19freight)+" "),e.shippingAddress?i("small",[e._v(" "+e._s(e.shippingAddress.street)+" "),e.shippingAddress.number?[e._v(" "+e._s(e.shippingAddress.number)+" ")]:e._e()],2):e._e()]),i("div",[e._v(e._s(e.formatMoney(e.amount.freight)))])]),e.amount.discount?i("div",{staticClass:"ec-summary__amount__row"},[i("span",[e._v(e._s(e.i19discount))]),i("div",[e._v(e._s(e.formatMoney(e.amount.discount)))])]):e._e(),i("div",{staticClass:"ec-summary__amount__row ec-summary__amount__row--total"},[i("span",[e._v(e._s(e.i19total))]),i("div",[e._v(e._s(e.formatMoney(e.amount.total)))])])])]),e._t("default"),e._t("buyer",[e.buyer?i("div",{staticClass:"ec-summary__buyer"},[i("h5",[e._v(e._s(e.i19buyer))]),i("p",[e._v(" "+e._s(e.buyerName)+" "),i("br"),i("small",[e._v(e._s(e.i19docNumber)+":")]),e._v(" "+e._s(e.buyer.doc_number)+" "),i("br"),i("small",[e._v(e._s(e.i19contactPhone)+":")]),e._v(" "+e._s(e.buyerPhone)+" ")]),i("button",{staticClass:"btn btn-sm btn-outline-secondary",attrs:{type:"button"},on:{click:function(t){return e.$emit("click:account")}}},[i("i",{staticClass:"fas fa-pencil-alt mr-1"}),e._v(" "+e._s(e.i19myAccount)+" ")])]):e._e()])],2)},r=[],a=i("83c4"),n=i("5b1c"),o={name:"EcSummary",props:{amount:{type:Object,required:!0},items:Array,buyer:Object,shippingAddress:Object},computed:{i19buyer:()=>Object(a["i18n"])(n["i19buyer"]),i19contactPhone:()=>Object(a["i18n"])(n["i19contactPhone"]),i19discount:()=>Object(a["i18n"])(n["i19discount"]),i19docNumber:()=>Object(a["i18n"])(n["i19docNumber"]),i19freight:()=>Object(a["i18n"])(n["i19freight"]),i19myAccount:()=>Object(a["i18n"])(n["i19myAccount"]),i19subtotal:()=>Object(a["i18n"])(n["i19subtotal"]),i19summary:()=>Object(a["i18n"])(n["i19summary"]),i19total:()=>Object(a["i18n"])(n["i19total"]),buyerName(){if(!this.buyer)return"";const{name:e}=this.buyer;return`${e.given_name} ${e.middle_name||""} ${e.family_name}`},buyerPhone(){return Object(a["phone"])(this.buyer)}},methods:{name:a["name"],price:a["price"],formatMoney:a["formatMoney"],img:e=>Object(a["img"])(e,null,"small")}},c=o,l=(i("fc7c"),i("2be6")),d=Object(l["a"])(c,s,r,!1,null,null,null);t["a"]=d.exports},9785:function(e,t,i){var s=i("0d4d");"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var r=i("0ed3").default;r("34976c2e",s,!0,{sourceMap:!1,shadowMode:!1})},"9d1f":function(e,t,i){var s=i("1ac7");"string"===typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);var r=i("0ed3").default;r("3c856edc",s,!0,{sourceMap:!1,shadowMode:!1})},bdb9:function(e,t,i){"use strict";var s=i("9785"),r=i.n(s);r.a},cf2a:function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"order"}},[i("ec-order",{attrs:{order:e.order}})],1)},r=[],a=i("5880"),n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("article",{staticClass:"ec-order"},[i("transition-group",{attrs:{"enter-active-class":"animated fadeIn slow"}},[e.isReady?i("ec-order-info",{key:"info",attrs:{order:e.localOrder,"skip-first-data-load":""},on:{"update:order":function(t){e.localOrder=t}}}):i("div",{key:"loading"},[i("div",{staticClass:"spinner-border",attrs:{role:"status"}},[i("span",{staticClass:"sr-only"},[e._v("Loading...")])])])],1)],1)},o=[],c=i("f27e"),l=i("2e80"),d=i.n(l),_=i("e2a0"),p={name:"EcOrder",components:{EcOrderInfo:_["a"]},props:{order:{type:Object,required:!0},skipDataLoad:{type:Boolean},accountOrdersUrl:{type:String,default:"/app/#/account/orders"},ecomPassport:{type:Object,default:()=>d.a}},data(){return{isReady:this.skipDataLoad,orderBody:{_id:"",...this.order}}},computed:{localOrder:{get(){return this.orderBody},set(e){this.orderBody=e,this.$emit("update:order",e)}}},methods:{fetchOrder(){const e=`/orders/${this.orderBody._id}.json`,t=this.ecomPassport.checkLogin()?this.ecomPassport.requestApi(e):Object(c["store"])({url:e});t.then(({data:e})=>{this.localOrder=e,this.isReady=!0})}},watch:{"order._id"(e){e&&e!==this.orderBody._id&&(this.orderBody=this.order)},"orderBody._id"(e){e&&!this.skipDataLoad&&this.fetchOrder()}},created(){this.skipDataLoad||(this.order._id?this.fetchOrder():this.order.number&&this.ecomPassport.fetchOrdersList().then(e=>{this.localOrder=e.find(({number:e})=>e===this.order.number)||{}}))}},u=p,m=(i("bdb9"),i("2be6")),g=Object(m["a"])(u,n,o,!1,null,null,null),f=g.exports,h={name:"order",components:{EcOrder:f},computed:{...Object(a["mapGetters"])(["orders"]),number(){const e=this.$route.params.number;return/^[0-9]+$/.test(e)&&parseInt(e,10)},order(){const e=this.orders.find(({_id:e,number:t})=>this.number===t||this.$route.params.number===e);if(!e){const{number:e}=this;return e?{_id:this.$route.params.id,number:e}:{_id:this.$route.params.number}}return e}}},b=h,v=Object(m["a"])(b,s,r,!1,null,null,null);t["default"]=v.exports},e2a0:function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"ec-order-info py-4"},[e.isNew?i("div",{staticClass:"ec-order-info__new"},[e._v(" "+e._s(e.i19orderConfirmationMsg)+"! ")]):e._e(),i("transition-group",{attrs:{"enter-active-class":"animated fadeInDown slower"}},[e.loaded?i("div",{key:"loaded"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-12 col-lg-7"},[i("p",{staticClass:"ec-order-info__number"},[e._v(" "+e._s(e.i19orderNumber)+": "),i("span",{staticClass:"h4"},[e._v(e._s(e.localOrder.number))])]),i("transition-group",{attrs:{"enter-active-class":"animated fadeIn"}},[e.isUpdating?i("div",{key:"updating"},[i("div",{staticClass:"spinner-grow",attrs:{role:"status"}},[i("span",{staticClass:"sr-only"},[e._v("Loading...")])])]):i("article",{key:"uptodate"},[e.status?i("div",{staticClass:"ec-order-info__status",class:"ec-order-info__status--"+e.status},[e._v(" "+e._s(e.i19OrderStatus(e.status))+" ")]):e._e(),e.transaction.status&&"pending"===e.transaction.status.current?[e.transaction.banking_billet?i("div",{staticClass:"ec-order-info__billet"},[i("p",{staticClass:"lead"},[e._v(e._s(e.i19doPaymentMsg))]),e.transaction.banking_billet.code?[i("p",[e._v(" "+e._s(e.i19ticketCode)+": "),i("br"),i("samp",[e._v(e._s(e.transaction.banking_billet.code))])]),i("button",{staticClass:"btn btn-outline-primary mr-3",on:{click:function(){return e.toClipboard(e.transaction.banking_billet.code)}}},[i("i",{staticClass:"fas fa-copy mr-1"}),e._v(" "+e._s(e.i19copyCode)+" ")])]:e._e(),e.transaction.banking_billet.link?i("a",{staticClass:"btn btn-primary",attrs:{target:"_blank",href:e.transaction.banking_billet.link}},[i("i",{staticClass:"fas fa-print mr-1"}),e._v(" "+e._s(e.i19printBillet)+" ")]):e._e()],2):e.transaction.payment_link?i("div",{staticClass:"ec-order-info__redirect"},[i("p",{staticClass:"lead"},[e._v(e._s(e.i19doPaymentMsg))]),i("a",{staticClass:"btn btn-lg btn-primary",attrs:{target:"_blank",href:e.transaction.payment_link}},[i("i",{staticClass:"fas fa-arrow-right"}),e._v(" "+e._s(e.i19redirectToPayment)+" ")])]):e._e()]:e._e(),i("div",{staticClass:"row ec-order-info__details"},[i("div",{staticClass:"col-12 col-md-6"},[e._t("payment",[i("div",{staticClass:"ec-order-info__payment"},[i("div",{staticClass:"ec-order-info__financial-status",class:"ec-order-info__financial-status--"+e.financialStatus},[e._v(" "+e._s(e.i19FinancialStatus(e.financialStatus))+" ")]),e._l(e.localOrder.transactions,(function(t){return i("div",[i("p",{staticClass:"ec-order-info__payment-value"},[e._v(" "+e._s(t.payment_method.name||e.localOrder.payment_method_label)+": "),t.installments&&t.installments.value?i("strong",[e._v(" "+e._s(t.installments.number)+"x "+e._s(e.i19of.toLowerCase())+" "+e._s(e.formatMoney(t.installments.value))+" ")]):i("strong",[e._v(" "+e._s(e.formatMoney(t.amount||e.localOrder.amount.total))+" ")])]),t.credit_card?i("p",{staticClass:"ec-order-info__credit-card"},[e._v(" "+e._s(t.credit_card.company)+" "),t.credit_card.last_digits?i("span",[t.credit_card.company?e._e():i("span",[e._v(" "+e._s(e.i19cardNumber)+" ")]),e._v(" **** "+e._s(t.credit_card.last_digits)+" ")]):e._e()]):e._e(),t.intermediator?[t.intermediator.transaction_code?i("div",{staticClass:"ec-order-info__transaction-code"},[i("small",[e._v(e._s(e.i19transactionCode))]),i("br"),e._v(" "+e._s(t.intermediator.transaction_code)+" ")]):e._e(),t.intermediator.transaction_reference?i("div",{staticClass:"ec-order-info__transaction-reference"},[i("small",[e._v(e._s(e.i19referenceCode))]),i("br"),e._v(" "+e._s(t.intermediator.transaction_reference)+" ")]):e._e()]:e._e()],2)}))],2)],null,{order:e.localOrder,transaction:e.transaction})],2),i("div",{staticClass:"col-12 col-md-6"},[e._t("shipping",[i("div",{staticClass:"ec-order-info__shipping"},[e.fulfillmentStatus?i("div",{staticClass:"ec-order-info__fulfillment-status",class:"ec-order-info__fulfillment-status--"+e.financialStatus},[e._v(" "+e._s(e.i19FulfillmentStatus(e.fulfillmentStatus))+" ")]):e._e(),e.localOrder.shipping_lines?e._l(e.localOrder.shipping_lines,(function(t){return i("ec-shipping-line",{key:t._id,attrs:{"shipping-line":t,financialStatus:e.financialStatus}})})):e._e()],2)],null,{order:e.localOrder,shippingAddress:e.shippingAddress})],2)])],2)])],1),e.localOrder.amount?i("div",{staticClass:"col-12 col-lg-5"},[i("div",{staticClass:"ec-order-info__summary card"},[i("div",{staticClass:"card-body"},[i("ec-summary",{attrs:{amount:e.localOrder.amount,items:e.localOrder.items,buyer:e.localOrder.buyer&&e.localOrder.buyer[0],shippingAddress:e.shippingAddress}})],1)]),e.isUpdating?e._e():["open"===e.status?[e.fulfillmentStatus?e._e():i("button",{staticClass:"ec-order-info__toggle btn btn-danger btn-sm",on:{click:e.toggle}},[i("i",{staticClass:"fas fa-exclamation-triangle mr-1"}),e._v(" "+e._s(e.i19cancelOrder)+" ")])]:"closed"!==e.status||"delivered"!==e.fulfillmentStatus?i("button",{staticClass:"ec-order-info__toggle btn btn-sm",class:"cancelled"===e.status?"btn-success":"btn-info",on:{click:e.toggle}},[i("i",{staticClass:"fas fa-check-circle mr-1"}),e._v(" "+e._s(e.i19reopenOrder)+" ")]):e._e()]],2):e._e()])]):i("div",{key:"loading"},[i("div",{staticClass:"spinner-border",attrs:{role:"status"}},[i("span",{staticClass:"sr-only"},[e._v("Loading...")])])])]),e.isNew&&e.accountOrdersUrl?i("a",{staticClass:"ec-order-info__orders-link btn btn-sm btn-light",attrs:{href:e.accountOrdersUrl}},[e._v(" "+e._s(e.i19myOrders)+" ")]):e._e()],1)},r=[],a=i("83c4"),n=i("f27e"),o=i("2e80"),c=i.n(o),l=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"ec-shipping-line"},[e.isDeliveryPending?i("div",[e.shippingLine.status?i("div",{staticClass:"ec-shipping-line__info"},[e.shippingLine.posting_deadline?i("div",[e._v(" "+e._s(e.i19postingDeadline)+": "+e._s(e.shippingLine.posting_deadline.days)+" "),e.shippingLine.posting_deadline.working_days?[e._v(" "+e._s(e.i19workingDays)+" ")]:[e._v(" "+e._s(e.i19days)+" ")],"paid"!==e.financialStatus&&e.shippingLine.posting_deadline.after_approval?i("span",[e._v(" "+e._s(e.i19afterApproval)+" ")]):e._e()],2):e._e(),e.shippingLine.delivery_time?i("div",[e._v(" "+e._s(e.i19postingDeadline)+": "+e._s(e.shippingLine.delivery_time.days)+" "),e.shippingLine.delivery_time.working_days?[e._v(" "+e._s(e.i19workingDays)+" ")]:[e._v(" "+e._s(e.i19days)+" ")]],2):e._e()]):i("div",{staticClass:"ec-shipping-line__deadline"},[e._v(" "+e._s(e.i19willReceiveMsg)+" "+e._s(e.shippingTime)+" "+e._s(e.isShippingTimeWorkingDays?e.i19workingDays:e.i19days)+" "),e.shippingLine.posting_deadline&&e.shippingLine.posting_deadline.after_approval?i("span",[e._v(" "+e._s(e.i19afterApproval)+" ")]):e._e()]),i("div",{staticClass:"ec-shipping-line__method"},[e._v(" "+e._s(e.i19shippingMethod)+": "+e._s(e.shippingLine.app.label||e.shippingLine.shipping_method_label)+" "),e.shippingLine.tracking_codes?i("div",{staticClass:"ec-shipping-line__tracking"},[e._v(" "+e._s(e.i19trackingCodes)+": "),e._l(e.shippingLine.tracking_codes,(function(t){return i("div",[t.link?i("a",{attrs:{href:t.link,target:"_blank"}},[e._v(" "+e._s(t.code)+" ")]):i("strong",[e._v(" "+e._s(t.code)+" ")])])}))],2):e._e()]),i("div",{staticClass:"ec-shipping-line__address"},[i("h5",[i("i",{staticClass:"fas fa-map-marker-alt mr-1"}),e._v(" "+e._s(e.i19shippingAddress)+" ")]),e.shippingLine.to.name?i("p",[e._v(" "+e._s(e.i19recipient)+": "+e._s(e.shippingLine.to.name)+" ")]):e._e(),e._v(" "+e._s(e.shippingLine.to.street+", "+(e.shippingLine.to.number||e.i19noNumber)+(e.shippingLine.to.complement?" - "+e.shippingLine.to.complement:"")+(e.shippingLine.to.borough?", "+e.shippingLine.to.borough:""))+" "),e.shippingLine.to.city?i("div",[e._v(" "+e._s(e.shippingLine.to.city)+" / "+e._s(e.shippingLine.to.province_code||e.shippingLine.to.province)+" ")]):e._e(),i("div",[e._v(e._s(e.shippingLine.to.zip))])])]):e._e()])},d=[],_=i("5b1c"),p={name:"EcShippingLine",props:{shippingLine:{type:Object,required:!0},financialStatus:String},computed:{i19afterApproval:()=>Object(a["i18n"])(_["i19afterApproval"]),i19days:()=>Object(a["i18n"])(_["i19days"]).toLowerCase(),i19noNumber:()=>Object(a["i18n"])(_["i19noNumber"]),i19postingDeadline:()=>Object(a["i18n"])(_["i19postingDeadline"]),i19recipient:()=>Object(a["i18n"])(_["i19recipient"]),i19shippingAddress:()=>Object(a["i18n"])(_["i19shippingAddress"]),i19shippingMethod:()=>Object(a["i18n"])(_["i19shippingMethod"]),i19trackingCodes:()=>Object(a["i18n"])(_["i19trackingCodes"]),i19willReceiveMsg:()=>Object(a["i18n"])(_["i19willReceiveMsg"]),i19workingDays:()=>Object(a["i18n"])(_["i19workingDays"]).toLowerCase(),isDeliveryPending(){if(this.shippingLine.status)switch(this.shippingLine.status.current){case"delivered":case"returned_for_exchange":case"received_for_exchange":case"returned":return!1}return!0},shippingTime(){const{shippingLine:e}=this;let t=e.posting_deadline?e.posting_deadline.days:0;return e.delivery_time&&(t+=e.delivery_time.days),t},isShippingTimeWorkingDays(){const{shippingLine:e}=this;return e.delivery_time&&e.delivery_time.working_days||e.posting_deadline&&e.posting_deadline.working_days}}},u=p,m=(i("3ef4"),i("2be6")),g=Object(m["a"])(u,l,d,!1,null,null,null),f=g.exports,h=i("8225"),b={name:"EcOrderInfo",components:{EcShippingLine:f,EcSummary:h["a"]},props:{ecomPassport:{type:Object,default:()=>c.a},order:{type:Object,required:!0},isNew:{type:Boolean},skipDataLoad:{type:Boolean},skipFirstDataLoad:{type:Boolean},skipCustomerUpdate:{type:Boolean},accountOrdersUrl:{type:String,default:"/app/#/account/orders"}},data(){return{loaded:this.skipDataLoad||this.skipFirstDataLoad,isUpdating:!1,reloadInterval:null,orderBody:this.order}},computed:{i19cancelOrder:()=>"Cancelar pedido",i19codeCopied:()=>Object(a["i18n"])(_["i19codeCopied"]),i19copyCode:()=>Object(a["i18n"])(_["i19copyCode"]),i19copyErrorMsg:()=>Object(a["i18n"])(_["i19copyErrorMsg"]),i19doPaymentMsg:()=>Object(a["i18n"])(_["i19doPaymentMsg"]),i19myOrders:()=>Object(a["i18n"])(_["i19myOrders"]),i19of:()=>Object(a["i18n"])(_["i19of"]),i19orderConfirmationMsg:()=>Object(a["i18n"])(_["i19orderConfirmationMsg"]),i19orderNumber:()=>Object(a["i18n"])(_["i19orderNumber"]),i19printBillet:()=>Object(a["i18n"])(_["i19printBillet"]),i19redirectToPayment:()=>Object(a["i18n"])(_["i19redirectToPayment"]),i19referenceCode:()=>Object(a["i18n"])(_["i19referenceCode"]),i19reopenOrder:()=>"Reabrir pedido",i19transactionCode:()=>Object(a["i18n"])(_["i19transactionCode"]),i19ticketCode:()=>Object(a["i18n"])(_["i19ticketCode"]),localOrder:{get(){return this.orderBody},set(e){this.orderBody=e,this.$emit("update:order",e),this.saveCustomerOrder()}},transaction(){const{transactions:e}=this.localOrder;return e&&e.length?e[0]:{}},shippingAddress(){const{localOrder:e}=this;if(e.shipping_lines&&e.shipping_lines.length)return e.shipping_lines[0].to},status(){return this.localOrder.status},financialStatus(){const{localOrder:e,transaction:t}=this,i=e.financial_status&&e.financial_status.current;return i||(t&&t.status?t.status.current:"pending")},fulfillmentStatus(){const{localOrder:e}=this,t=e.fulfillment_status&&e.fulfillment_status.current;if(t)return t;{const t=e.shipping_lines&&e.shipping_lines[0];if(t&&t.status)return t.status.current}return null}},methods:{formatMoney:a["formatMoney"],i19FinancialStatus:e=>Object(a["i18n"])(_["i19FinancialStatus"])[e],i19FulfillmentStatus:e=>Object(a["i18n"])(_["i19FulfillmentStatus"])[e],i19OrderStatus:e=>Object(a["i18n"])(_["i19OrderStatus"])[e],toClipboard(e){this.$copyText(e).then(()=>{this.$bvToast.toast(e,{title:this.i18n("CodeCopied"),variant:"success",solid:!0,autoHideDelay:1500})},t=>{console.error(t),this.$bvToast.toast("Oops",{title:`${this.i18n("copyErrorMsg")}: ${e}`,variant:"warning",solid:!0})})},saveCustomerOrder(){const{localOrder:e,ecomPassport:t}=this;!this.skipCustomerUpdate&&e.number&&t&&t.checkAuthorization()&&t.requestApi("/me.json").then(({data:i})=>{const s=i.orders||[],r={};["_id","created_at","number","currency_id","currency_symbol","amount","payment_method_label","shipping_method_label"].forEach(t=>{e[t]&&(r[t]=e[t])});const a=s.findIndex(({_id:t,number:i})=>t===e._id||i===e.number);a>-1?Object.assign(s[a],r):s.push(r),t.requestApi("/me.json","patch",{orders:s})})},toggle(){this.isUpdating=!0;const e="open"===this.localOrder.status?{status:"cancelled",cancel_reason:"customer"}:{status:"open"};c.a.requestApi(`/orders/${this.order._id}.json`,"patch",e).then(()=>{this.localOrder={...this.localOrder,...e}}).finally(()=>{this.isUpdating=!1})}},created(){if(this.order._id&&(this.isNew&&this.saveCustomerOrder(),!this.skipDataLoad)){const e=()=>Object(n["store"])({url:`/orders/${this.order._id}.json`}).then(({data:e})=>{this.localOrder={...this.localOrder,...e}}).catch(e=>{console.error(e)});this.reloadInterval=setInterval(e,9e3),this.skipFirstDataLoad||setTimeout(()=>{e().finally(()=>{this.loaded=!0})},this.isNew?1e3:3e3)}},beforeDestroy(){clearInterval(this.reloadInterval)}},v=b,y=(i("350e"),Object(m["a"])(v,s,r,!1,null,null,null));t["a"]=y.exports},fc7c:function(e,t,i){"use strict";var s=i("0564"),r=i.n(s);r.a}}]);
//# sourceMappingURL=order.js.map