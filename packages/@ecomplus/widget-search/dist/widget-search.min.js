!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("@ecomplus/utils"),require("vue"),require("@ecomplus/search-engine"),require("@ecomplus/client"),require("@ecomplus/shopping-cart"),require("lozad"),require("core-js/modules/es.function.name"),require("@ecomplus/storefront-twbs"),require("core-js/modules/es.array.filter"),require("core-js/modules/es.array.for-each"),require("core-js/modules/es.array.index-of"),require("core-js/modules/es.array.slice"),require("core-js/modules/es.number.constructor"),require("core-js/modules/es.object.to-string"),require("core-js/modules/es.promise"),require("core-js/modules/es.promise.finally"),require("core-js/modules/es.regexp.exec"),require("core-js/modules/es.string.replace"),require("core-js/modules/web.dom-collections.for-each")):"function"==typeof define&&define.amd?define([,,,,,"lozad","core-js/modules/es.function.name",,"core-js/modules/es.array.filter","core-js/modules/es.array.for-each","core-js/modules/es.array.index-of","core-js/modules/es.array.slice","core-js/modules/es.number.constructor","core-js/modules/es.object.to-string","core-js/modules/es.promise","core-js/modules/es.promise.finally","core-js/modules/es.regexp.exec","core-js/modules/es.string.replace","core-js/modules/web.dom-collections.for-each"],t):"object"==typeof exports?exports.widgetSearch=t(require("@ecomplus/utils"),require("vue"),require("@ecomplus/search-engine"),require("@ecomplus/client"),require("@ecomplus/shopping-cart"),require("lozad"),require("core-js/modules/es.function.name"),require("@ecomplus/storefront-twbs"),require("core-js/modules/es.array.filter"),require("core-js/modules/es.array.for-each"),require("core-js/modules/es.array.index-of"),require("core-js/modules/es.array.slice"),require("core-js/modules/es.number.constructor"),require("core-js/modules/es.object.to-string"),require("core-js/modules/es.promise"),require("core-js/modules/es.promise.finally"),require("core-js/modules/es.regexp.exec"),require("core-js/modules/es.string.replace"),require("core-js/modules/web.dom-collections.for-each")):e.widgetSearch=t(e.ecomUtils,e.Vue,e.EcomSearch,e.ecomClient,e.ecomCart,e.lozad,e["core-js/modules/es.function.name"],e.__storefront_twbs,e["core-js/modules/es.array.filter"],e["core-js/modules/es.array.for-each"],e["core-js/modules/es.array.index-of"],e["core-js/modules/es.array.slice"],e["core-js/modules/es.number.constructor"],e["core-js/modules/es.object.to-string"],e["core-js/modules/es.promise"],e["core-js/modules/es.promise.finally"],e["core-js/modules/es.regexp.exec"],e["core-js/modules/es.string.replace"],e["core-js/modules/web.dom-collections.for-each"])}(window,(function(e,t,r,s,o,i,n,a,c,u,l,d,p,m,h,f,_,g,b){return function(e){var t={};function r(s){if(t[s])return t[s].exports;var o=t[s]={i:s,l:!1,exports:{}};return e[s].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,s){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(s,o,function(t){return e[t]}.bind(null,o));return s},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/assets/vendor/",r(r.s=33)}([function(t,r){t.exports=e},function(e,t,r){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r=function(e,t){var r=e[1]||"",s=e[3];if(!s)return r;if(t&&"function"==typeof btoa){var o=(n=s,a=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(a),"/*# ".concat(c," */")),i=s.sources.map((function(e){return"/*# sourceURL=".concat(s.sourceRoot||"").concat(e," */")}));return[r].concat(i).concat([o]).join("\n")}var n,a,c;return[r].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(r,"}"):r})).join("")},t.i=function(e,r,s){"string"==typeof e&&(e=[[null,e,""]]);var o={};if(s)for(var i=0;i<this.length;i++){var n=this[i][0];null!=n&&(o[n]=!0)}for(var a=0;a<e.length;a++){var c=[].concat(e[a]);s&&o[c[0]]||(r&&(c[2]?c[2]="".concat(r," and ").concat(c[2]):c[2]=r),t.push(c))}},t}},function(e,t,r){"use strict";function s(e,t){for(var r=[],s={},o=0;o<t.length;o++){var i=t[o],n=i[0],a={id:e+":"+o,css:i[1],media:i[2],sourceMap:i[3]};s[n]?s[n].parts.push(a):r.push(s[n]={id:n,parts:[a]})}return r}r.r(t),r.d(t,"default",(function(){return m}));var o="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!o)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var i={},n=o&&(document.head||document.getElementsByTagName("head")[0]),a=null,c=0,u=!1,l=function(){},d=null,p="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function m(e,t,r,o){u=r,d=o||{};var n=s(e,t);return h(n),function(t){for(var r=[],o=0;o<n.length;o++){var a=n[o];(c=i[a.id]).refs--,r.push(c)}t?h(n=s(e,t)):n=[];for(o=0;o<r.length;o++){var c;if(0===(c=r[o]).refs){for(var u=0;u<c.parts.length;u++)c.parts[u]();delete i[c.id]}}}}function h(e){for(var t=0;t<e.length;t++){var r=e[t],s=i[r.id];if(s){s.refs++;for(var o=0;o<s.parts.length;o++)s.parts[o](r.parts[o]);for(;o<r.parts.length;o++)s.parts.push(_(r.parts[o]));s.parts.length>r.parts.length&&(s.parts.length=r.parts.length)}else{var n=[];for(o=0;o<r.parts.length;o++)n.push(_(r.parts[o]));i[r.id]={id:r.id,refs:1,parts:n}}}}function f(){var e=document.createElement("style");return e.type="text/css",n.appendChild(e),e}function _(e){var t,r,s=document.querySelector('style[data-vue-ssr-id~="'+e.id+'"]');if(s){if(u)return l;s.parentNode.removeChild(s)}if(p){var o=c++;s=a||(a=f()),t=v.bind(null,s,o,!1),r=v.bind(null,s,o,!0)}else s=f(),t=y.bind(null,s),r=function(){s.parentNode.removeChild(s)};return t(e),function(s){if(s){if(s.css===e.css&&s.media===e.media&&s.sourceMap===e.sourceMap)return;t(e=s)}else r()}}var g,b=(g=[],function(e,t){return g[e]=t,g.filter(Boolean).join("\n")});function v(e,t,r,s){var o=r?"":s.css;if(e.styleSheet)e.styleSheet.cssText=b(t,o);else{var i=document.createTextNode(o),n=e.childNodes;n[t]&&e.removeChild(n[t]),n.length?e.insertBefore(i,n[t]):e.appendChild(i)}}function y(e,t){var r=t.css,s=t.media,o=t.sourceMap;if(s&&e.setAttribute("media",s),d.ssrId&&e.setAttribute("data-vue-ssr-id",t.id),o&&(r+="\n/*# sourceURL="+o.sources[0]+" */",r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}},function(e,t,r){var s=r(26);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);(0,r(2).default)("36d272bd",s,!0,{})},function(e,t,r){var s=r(28);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);(0,r(2).default)("05bb3383",s,!0,{})},function(e,t,r){var s=r(30);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);(0,r(2).default)("07f6a160",s,!0,{})},function(e,t,r){var s=r(32);"string"==typeof s&&(s=[[e.i,s,""]]),s.locals&&(e.exports=s.locals);(0,r(2).default)("79f60801",s,!0,{})},function(e,r){e.exports=t},function(e,t){e.exports=r},function(e,t){e.exports=s},function(e,t){e.exports=o},function(e,t){e.exports=i},function(e,t){e.exports=n},function(e,t){e.exports=a},function(e,t){e.exports=c},function(e,t){e.exports=u},function(e,t){e.exports=l},function(e,t){e.exports=d},function(e,t){e.exports=p},function(e,t){e.exports=m},function(e,t){e.exports=h},function(e,t){e.exports=f},function(e,t){e.exports=_},function(e,t){e.exports=g},function(e,t){e.exports=b},function(e,t,r){"use strict";var s=r(3);r.n(s).a},function(e,t,r){(t=r(1)(!1)).push([e.i,".ec-image img{max-width:100%;height:auto}",""]),e.exports=t},function(e,t,r){"use strict";var s=r(4);r.n(s).a},function(e,t,r){(t=r(1)(!1)).push([e.i,".ec-prices{line-height:1.2}.ec-prices:not(.ec-prices--big){font-size:.95rem}.ec-prices:not(.ec-prices--big) .ec-prices__installments{font-weight:300}.ec-prices__value{display:block;font-size:1.25rem}.ec-prices--big .ec-prices__value{font-size:250%;margin-bottom:.25rem}.ec-prices--literal .ec-prices__discount span,.ec-prices--literal .ec-prices__installments span{font-weight:700}.ec-prices--literal small{font-size:100%}.ec-prices:not(.ec-prices--literal) .ec-prices__compare{color:var(--gray)}",""]),e.exports=t},function(e,t,r){"use strict";var s=r(5);r.n(s).a},function(e,t,r){(t=r(1)(!1)).push([e.i,".ec-product-card{position:relative;padding-bottom:.1rem;margin-bottom:0}.ec-product-card--inactive,.ec-product-card--inactive img{opacity:.7}.ec-product-card__offer-stamp{background-color:var(--success);color:var(--success-yiq);min-width:40px;font-size:.78rem;line-height:1.8;text-align:center;position:absolute;z-index:9;top:.35rem;right:.35rem;border-radius:.125rem;opacity:.9}.ec-product-card__link:hover h3{text-decoration:underline}.ec-product-card__name{margin-top:.5rem;font-size:.88rem;line-height:1.2;height:3.168rem;overflow:hidden;font-weight:400;display:block;z-index:1}.ec-product-card__pictures{display:-webkit-box;display:flex;background-color:var(--body-bg);-webkit-box-align:center;align-items:center;text-align:center;overflow:hidden}@media (max-width:575.98px){.ec-product-card__pictures{height:180px}}@media (min-width:576px) and (max-width:991.98px){.ec-product-card__pictures{height:200px}}@media (min-width:992px){.ec-product-card__pictures{height:250px}}.ec-product-card__picture{display:block;-webkit-box-flex:0;flex:0 0 100%;opacity:0;-webkit-transition:opacity .25s;transition:opacity .25s}.ec-product-card__picture:first-child{opacity:1}@media (max-width:300px){.ec-product-card__picture{max-width:100px}}@media (max-width:575.98px){.ec-product-card__picture img{max-height:180px}}@media (min-width:576px) and (max-width:991.98px){.ec-product-card__picture img{max-height:200px}}@media (min-width:992px){.ec-product-card__picture img{max-height:250px}}.ec-product-card__prices{margin-bottom:.15rem;height:4.95rem;overflow:hidden;white-space:nowrap}.ec-product-card__prices .ec-prices__value:first-child{margin-top:1.14rem}.ec-product-card:hover .ec-product-card__picture{display:none}.ec-product-card:hover .ec-product-card__picture:last-child{display:block;opacity:1}.ec-product-card:hover .ec-product-card__buy{opacity:1}",""]),e.exports=t},function(e,t,r){"use strict";var s=r(6);r.n(s).a},function(e,t,r){(t=r(1)(!1)).push([e.i,".ec-search__popover{max-width:calc(100vw - 2rem);max-height:calc(100vh - 200px);margin-top:10px;overflow-y:auto;box-shadow:0 0 .75rem rgba(0,0,0,.075)}@media (min-width:576px){.ec-search__popover{min-width:400px}}@media (min-width:850px){.ec-search__popover{max-height:calc(100vh - 100px)}}@media (min-width:1200px){.ec-search__popover{max-width:1100px;min-width:800px}}.ec-search__head{display:-webkit-box;display:flex;-webkit-box-pack:justify;justify-content:space-between;-webkit-box-align:start;align-items:flex-start}.ec-search__close{padding:0 .25rem}.ec-search__close:focus{box-shadow:none}.ec-search__history,.ec-search__info{font-weight:300;margin-bottom:.25rem;font-size:1.15rem;overflow-x:auto;white-space:nowrap;color:var(--gray)}.ec-search__info em{color:var(--secondary);margin-right:.5rem}.ec-search__info span{display:inline-block}.ec-search__history__link{margin-left:.5rem}.ec-search__items{display:-webkit-box;display:flex;overflow-x:auto}@media (min-width:992px){.ec-search__items{margin-top:1rem;width:850px}}.ec-search__item{padding-right:1rem}.ec-search__item:last-child{padding-right:0}@media (max-width:849.98px){.ec-search__item{width:200px;-webkit-box-flex:0;flex:0 0 200px}}@media (min-width:850px){.ec-search__item{width:25%}}.ec-search__item .btn,.ec-search__item button{display:none}.ec-search__item .ec-prices{height:auto;white-space:normal}",""]),e.exports=t},function(e,t,r){"use strict";r.r(t);r(12);var s=r(7),o=r.n(s),i=(r(13),r(14),r(15),r(16),r(17),r(18),r(19),r(20),r(21),r(22),r(23),r(24),r(0)),n=r(8),a=r.n(n),c={did_you_mean:{en_us:"Did you mean",pt_br:"Você quis dizer"},no_results_for:{en_us:"No results for",pt_br:"Nenhum produto encontrado para"},total_results_for:{en_us:"products found for",pt_br:"produtos encontrados para"},see_all:{en_us:"See all",pt_br:"Ver todos"}},u=r(9),l=r(10),d=r.n(l);const p={from:{en_us:"from",pt_br:"de"},to:{en_us:"to",pt_br:"por"},unavailable:{en_us:"Unavailable",pt_br:"Indisponível"},out_of_stock:{en_us:"Out of stock",pt_br:"Sem estoque"},buy:{en_us:"Buy",pt_br:"Comprar"},up_to:{en_us:"up to",pt_br:"até"},zip:{en_us:"Zip code",pt_br:"CEP"},calculate_shipping:{en_us:"Calculate shipping",pt_br:"Calcular frete e prazo"},days:{en_us:"days",pt_br:"dias"},working_days:{en_us:"working days",pt_br:"dias úteis"},free_shipping:{en_us:"free shipping",pt_br:"frete grátis"},interest_free:{en_us:"interest free",pt_br:"sem juros"},discount_of:{en_us:"discount of",pt_br:"desconto de"},select_variation:{en_us:"Please select an option in each field above",pt_br:"Por favor selecione uma opção em cada campo acima"}};var m=function(e,t){return t||(t=this&&this.lang||"en_us"),p[e]&&p[e][t]||""},h=r(11),f=r.n(h),_={name:"EcImage",props:{src:[String,Object],fallbackSrc:String,alt:{type:String,default:""},fade:{type:Boolean,default:!0},placeholder:{type:String,default:"/assets/img-placeholder.png"},pictureBreakpoint:{type:Number,default:576}},data(){return{imgClasses:`lozad ${this.fade?"fade":"show"}`}},computed:{imgObj(){return Object(i.img)(this.src)}},mounted(){const e=this.$refs.lazyImg;if(e){f()(e,{loaded:e=>{e.classList.add("show");const t=this.fallbackSrc||this.src.zoom&&this.src.zoom.url;if(t){("IMG"===e.tagName?e:e.lastChild).onerror=function(){console.error(this),e.style.display="none";const r=document.createElement("IMG");r.src=t,e.parentNode.insertBefore(r,e.nextSibling)}}}}).observe()}}};r(25);function g(e,t,r,s,o,i,n,a){var c,u="function"==typeof e?e.options:e;if(t&&(u.render=t,u.staticRenderFns=r,u._compiled=!0),s&&(u.functional=!0),i&&(u._scopeId="data-v-"+i),n?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(n)},u._ssrRegister=c):o&&(c=a?function(){o.call(this,this.$root.$options.shadowRoot)}:o),c)if(u.functional){u._injectStyles=c;var l=u.render;u.render=function(e,t){return c.call(t),l(e,t)}}else{var d=u.beforeCreate;u.beforeCreate=d?[].concat(d,c):[c]}return{exports:e,options:u}}var b=g(_,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"ec-image"},["string"==typeof e.src?r("img",{ref:"lazyImg",class:e.imgClasses,attrs:{alt:e.alt,"data-src":e.src}}):e.src&&e.imgObj?r("picture",{ref:"lazyImg",class:e.imgClasses,attrs:{"data-iesrc":e.src.zoom?e.src.zoom.url:e.imgObj.url,"data-alt":e.imgObj.alt}},[e.src.small?r("source",{attrs:{srcset:e.src.small.url,media:"(max-width: "+(e.pictureBreakpoint-.02)+"px)"}}):e._e(),r("source",{attrs:{srcset:e.imgObj.url,media:"(min-width: "+e.pictureBreakpoint+"px)"}})]):r("img",{attrs:{src:e.placeholder,alt:"No image"}})])}),[],!1,null,null,null).exports;const v=(e,t)=>{const{type:r,value:s}=t;if(s)return"percentage"===r?e*(100-s)/100:e-s};var y={name:"EcPrices",props:{lang:{type:String,default:i.$ecomConfig.get("lang")},product:{type:Object,required:!0},literal:{type:Boolean},big:{type:Boolean},installmentsOption:{type:Object},discountOption:{type:Object},discountText:{type:[String,Boolean],default:""}},data(){return{interestFreeInstallments:0,discount:{type:null,value:0},extraDiscount:{type:null,value:0},discountLabel:this.discountText}},methods:{dictionary:m,formatMoney:i.formatMoney,updateInstallments(e){if(e&&!e.monthly_interest){const t=e.min_installment||5,r=parseInt(this.price/t,10);this.interestFreeInstallments=Math.min(r,e.max_number)}},updateDiscount(e){e&&(!e.min_amount||e.min_amount<=this.price)&&(this.discount=e,!this.discountText&&!1!==this.discountText&&e.label&&(this.discountLabel=`via ${e.label}`))}},computed:{price(){const e=Object(i.price)(this.product);return this.extraDiscount.value?v(e,this.extraDiscount):e},comparePrice(){return Object(i.onPromotion)(this.product)?this.product.base_price:this.extraDiscount.value?Object(i.price)(this.product):void 0},priceWithDiscount(){return v(this.price,this.discount)}},created(){if(this.installmentsOption||this.discountOption)this.updateInstallments(this.installmentsOption),this.updateDiscount(this.discountOption);else{const{storefront:e}=window;if(e){const t=()=>{const t=e.info&&e.info.list_payments;return!!t&&(this.updateInstallments(t.installments_option),this.updateDiscount(t.discount_option),Object.keys(t).length>0)};t()||e.on("info:list_payments",t);const r=()=>{const t=e.info&&e.info.apply_discount;if(t){const e=t.available_extra_discount;return e&&(this.extraDiscount=e),Object.keys(t).length>0}return!1};r()||e.on("info:apply_discount",r)}}}},x=(r(27),{name:"EcProductCard",components:{EcImage:b,EcPrices:g(y,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"ec-prices",class:{"ec-prices--literal":e.literal,"ec-prices--big":e.big}},[e.comparePrice?r("span",{staticClass:"ec-prices__compare"},[e.literal?[e._v(" "+e._s(e.dictionary("from"))+" "),r("s",[e._v(e._s(e.formatMoney(e.comparePrice)))]),e._v(" "+e._s(e.dictionary("to"))+" ")]:r("s",[e._v(e._s(e.formatMoney(e.comparePrice)))])],2):e._e(),r("strong",{staticClass:"ec-prices__value"},[e._v(" "+e._s(e.formatMoney(e.price))+" ")]),r("transition-group",{attrs:{"enter-active-class":"animated slideInDown"}},[e.interestFreeInstallments>1?r("div",{key:"installments",staticClass:"ec-prices__installments"},[e._v(" "+e._s(e.interestFreeInstallments)+"x "),r("span",[e._v(" "+e._s(e.formatMoney(e.price/e.interestFreeInstallments))+" ")]),e.literal?r("small",[e._v(" "+e._s(e.dictionary("interest_free"))+" ")]):e._e()]):e._e(),"number"==typeof e.priceWithDiscount&&e.priceWithDiscount<e.price?r("div",{key:"discount",staticClass:"ec-prices__discount"},[r("span",[e._v(" "+e._s(e.formatMoney(e.priceWithDiscount))+" ")]),"string"==typeof e.discountLabel?r("small",[e._v(" "+e._s(e.discountLabel)+" ")]):e._e()]):e._e()])],1)}),[],!1,null,null,null).exports},props:{lang:{type:String,default:i.$ecomConfig.get("lang")},storeId:{type:Number,default:i.$ecomConfig.get("store_id")},productId:String,product:Object,buyText:String,canAddToCart:{type:Boolean,default:!0},isLoaded:Boolean},data:()=>({body:{},isLoading:!1,error:""}),computed:{strBuy(){return this.buyText||this.dictionary("buy")},isActive(){const{body:e}=this;return e.available&&e.visible&&Object(i.inStock)(e)},discount(){const{body:e}=this;return Object(i.onPromotion)(e)?Math.round(100*(e.base_price-Object(i.price)(e))/e.base_price):0}},methods:{dictionary:m,name:i.name,inStock:i.inStock,setBody(e){this.body=Object.assign({},e),delete this.body.body_html,delete this.body.body_text},fetchItem(){if(this.productId){this.isLoading=!0;const{storeId:e,productId:t}=this;Object(u.store)({url:`/products/${t}.json`,storeId:e}).then(({data:e})=>{this.$emit("update:product",e),this.setBody(e),this.$emit("update:is-loaded",!0)}).catch(e=>{console.error(e),this.body.name&&this.body.slug&&this.body.pictures||(this.error="pt_br"===this.lang?"Erro de conexão, clique no produto para tentar novamente":"Connection error, click product to try again")}).finally(()=>{this.isLoading=!1})}},buy(){const e=this.body;if(this.$emit("buy",{product:e}),this.canAddToCart){const{variations:t,slug:r}=e;t&&t.length?window.location=`/${r}`:d.a.addProduct(e)}}},created(){this.product&&(this.setBody(this.product),void 0===this.product.available&&(this.body.available=!0),void 0===this.product.visible&&(this.body.visible=!0)),this.isLoaded||this.fetchItem()}}),w=(r(29),{name:"EcSearch",components:{EcProductCard:g(x,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"ec-product-card",class:e.body._id&&!e.isActive?"ec-product-card--inactive":null},[r("transition",{attrs:{"enter-active-class":"animated fadeIn"}},[e.isLoading?e._e():r("section",[e._t("discount-tag",[e.isActive&&e.discount>0?r("span",{staticClass:"ec-product-card__offer-stamp"},[e._v(" -"),r("b",[e._v(e._s(e.discount))]),e._v("% ")]):e._e()]),e._t("body",[r("a",{staticClass:"ec-product-card__link",attrs:{href:"/"+e.body.slug,title:e.name(e.body)}},[r("div",{staticClass:"ec-product-card__pictures"},[e.body.pictures&&e.body.pictures.length?e._l(e.body.pictures.slice(0,2),(function(e,t){return r("ec-image",{key:t,staticClass:"ec-product-card__picture",attrs:{src:e,pictureBreakpoint:300}})})):r("ec-image",{staticClass:"ec-product-card__picture"})],2),r("h3",{staticClass:"ec-product-card__name"},[e._v(" "+e._s(e.name(e.body))+" ")])])]),e.body.available&&e.body.visible?e.inStock(e.body)?[e._t("prices",[r("ec-prices",{staticClass:"ec-product-card__prices",attrs:{lang:e.lang,product:e.body}})]),r("div",{staticClass:"ec-product-card__buy fade",on:{click:e.buy}},[e._t("buy",[r("button",{staticClass:"btn btn-block btn-primary",attrs:{type:"button"}},[r("i",{staticClass:"fas fa-shopping-bag mr-1"}),e._v(" "+e._s(e.strBuy)+" ")])])],2)]:e._t("out-of-stock",[r("p",{staticClass:"badge badge-dark"},[e._v(" "+e._s(e.dictionary("out_of_stock"))+" ")])]):e._t("unavailable",[r("p",{staticClass:"badge badge-warning"},[e._v(" "+e._s(e.dictionary("unavailable"))+" ")])]),e._t("footer")],2)]),e.isLoading?[e._t("default"),e.error?r("div",{staticClass:"alert alert-warning small",attrs:{role:"alert"}},[e._v(" "+e._s(e.error)+" ")]):e._e()]:e._e()],2)}),[],!1,null,null,null).exports},props:{lang:{type:String,default:i._config.get("lang")},storeId:{type:Number,default:i._config.get("store_id")},term:{type:String,default:""},maxItems:{type:Number,default:4},autoFixScore:{type:[Number,Boolean],default:.83},popoverPlacement:{type:String,default:"bottom"}},data:function(){return{ecomSearch:new a.a(this.storeId),searchTerm:this.term,searchedTerm:null,searching:!1,suggestedItems:[],suggestedTerm:"",totalSearchResults:0,elInput:null,showPopover:!1}},computed:{history:function(){var e=this;return this.ecomSearch.history.filter((function(t){return t.length>2&&-1===e.searchTerm.indexOf(t)})).slice(0,5)}},methods:{dictionary:function(e,t){return t||(t=this&&this.lang||"en_us"),c[e]&&c[e][t]||""},setSearchTerm:function(e){this.elInput.value=e;var t=this.$el.parentElement;t&&"FORM"===t.tagName?t.submit():this.searchTerm=e},checkCurrentTerm:function(e){return!e&&!this.elInput.value||this.elInput.value===e},handleSuggestions:function(e){var t=this,r=e,s=!1;this.suggestedTerm="",this.ecomSearch.getTermSuggestions().forEach((function(o){var i=o.options,n=o.text;if(i.length){var a=i[0];!t.totalSearchResults&&t.autoFixScore>0&&a.score>=t.autoFixScore&&-1===a.text.indexOf(e)&&(s=!0),r=r.replace(n,a.text)}})),r!==e&&(s?this.elInput.value=this.searchTerm=r:this.suggestedTerm=r,this.ecomSearch.history.shift())},fetchItems:function(e){var t=this,r=this.ecomSearch;!1!==e?(e||(e=this.searchTerm),r.setSearchTerm(e)):r.reset().setPageSize(this.maxItems),this.searching=!0,r.fetch().then((function(){if(t.checkCurrentTerm(e)){var s=r.getItems,o=r.getTotalCount;t.searchedTerm=e,t.suggestedItems=s(),t.totalSearchResults=o(),t.handleSuggestions(e)}})).catch((function(e){console.error(e)})).finally((function(){t.searching=!1}))},instantSearch:function(e){var t=this;null===this.searchedTerm?this.fetchItems(e):this.searchedTerm!==e&&(this.showPopover=!1,setTimeout((function(){t.checkCurrentTerm(e)&&t.fetchItems(e),setTimeout((function(){t.checkCurrentTerm(e)&&(t.showPopover=!0)}),100)}),400))}},created:function(){var e,t=this,r=window.pageYOffset;window.addEventListener("scroll",(function(){clearTimeout(e),e=setTimeout((function(){Math.abs(window.pageYOffset-r)>50&&t.elInput===document.activeElement&&t.elInput.blur(),r=window.pageYOffset}),50)})),this.ecomSearch.setPageSize(this.maxItems)},mounted:function(){for(var e,t=this,r=0;r<this.$el.childNodes.length;r++)if("INPUT"===this.$el.childNodes[0].tagName){e=this.$el.childNodes[0];break}e?(e.addEventListener("keyup",(function(r){t.searchTerm=e.value,t.showPopover||(t.showPopover=!0)})),e.addEventListener("focus",(function(e){t.totalSearchResults||t.instantSearch(!1)})),this.term?this.fetchItems():this.searchTerm=e.value,e.setAttribute("autocomplete","off"),this.elInput=e):this.fetchItems()},watch:{searchTerm:function(e){e?e.length>2&&this.instantSearch(e):this.instantSearch(!1)}}}),j=(r(31),g(w,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"ec-search"},[e._t("input",[r("input",{staticClass:"form-control",attrs:{type:"search"}})]),e.elInput?[r("b-popover",{attrs:{triggers:"focus","custom-class":"ec-search__popover",target:e.elInput.id,show:e.showPopover,placement:e.popoverPlacement,"fallback-placement":[e.popoverPlacement]},on:{"update:show":function(t){e.showPopover=t}}},[r("div",{staticClass:"ec-search__head"},[r("div",[e.searching?r("div",{staticClass:"spinner-border m-4",attrs:{role:"status"}},[r("span",{staticClass:"sr-only"},[e._v("Loading...")])]):e._e(),r("transition",{attrs:{"enter-active-class":"animated fadeIn"}},[!e.searching&&e.searchedTerm?r("div",{staticClass:"ec-search__info"},[e.suggestedTerm?[e._v(" "+e._s(e.dictionary("did_you_mean"))+" "),r("a",{staticClass:"ec-search__suggestion",attrs:{href:"#"},domProps:{textContent:e._s(e.suggestedTerm)},on:{click:function(t){return t.preventDefault(),e.setSearchTerm(e.suggestedTerm)}}}),e._v(" ? ")]:e._e(),e.totalSearchResults?r("span",{staticClass:"ec-search__count-results"},[r("strong",[e._v(e._s(e.totalSearchResults))]),e._v(" "+e._s(e.dictionary("total_results_for"))+" "),r("em",[e._v(e._s(e.searchedTerm))]),e.totalSearchResults>e.maxItems?r("a",{attrs:{href:"#"},domProps:{textContent:e._s("+"+e.dictionary("see_all"))},on:{click:function(t){return t.preventDefault(),e.setSearchTerm(e.searchedTerm)}}}):e._e()]):r("span",{staticClass:"ec-search__no-results"},[e._v(" "+e._s(e.dictionary("no_results_for"))+" "),r("em",[e._v(e._s(e.searchedTerm))])])],2):e._e()]),r("transition",{attrs:{"enter-active-class":"animated fadeInLeft"}},[e.history.length?r("div",{staticClass:"ec-search__history"},[r("i",{staticClass:"fas fa-history"}),e._l(e.history,(function(t){return r("a",{staticClass:"ec-search__history__link",attrs:{href:"#"},domProps:{textContent:e._s(t)},on:{click:function(r){return r.preventDefault(),e.setSearchTerm(t)}}})}))],2):e._e()])],1),r("button",{staticClass:"btn ec-search__close",attrs:{type:"button"},on:{click:function(t){e.showPopover=!1}}},[r("i",{staticClass:"fas fa-times"})])]),r("transition",{attrs:{"enter-active-class":"animated fadeIn slow"}},[!e.searching&&e.suggestedItems.length?r("div",{staticClass:"ec-search__items"},e._l(e.suggestedItems,(function(t){return r("ec-product-card",{key:t._id,staticClass:"ec-search__item",attrs:{lang:e.lang,storeId:e.storeId,product:t}})})),1):e._e()])],1)]:e._e()],2)}),[],!1,null,null,null).exports);t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"search-input",r=document.getElementById(t);if(r){for(var s={},i=r.attributes.length-1;i>=0;i--){var n=r.attributes[i],a=n.name,c=n.value;s[a]=c}new o.a({render:function(t){return t(j,{props:e.props,scopedSlots:{input:function(){return t("input",{attrs:s})}}})}}).$mount(r)}}}]).default}));
//# sourceMappingURL=widget-search.min.js.map